<!DOCTYPE html>
<html lang="fr" dir="ltr" class="client-nojs">
<head>
<title>Vue locale (langage) - Wiki1000</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.18.6" />
<link rel="shortcut icon" href="https://frp.sage.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="../opensearch_desc.php" title="Wiki1000 (fr)" />
<link rel="EditURI" type="application/rsd+xml" href="https://frp.sage.fr/wiki1000/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Flux Atom de Wiki1000" href="https://frp.sage.fr/wiki1000/index.php?title=Sp%C3%83%C2%A9cial:Modifications_r%C3%83%C2%A9centes&amp;feed=atom" />
<link rel="stylesheet" href="../load.php@debug=false&amp;lang=fr&amp;modules=mediawiki.legacy.commonPrint,shared%257Cskins.monobook&amp;only=styles&amp;skin=monobook&amp;%252A.css" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/wiki1000/skins/monobook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/wiki1000/skins/monobook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/wiki1000/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki1000/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="../load.php@debug=false&amp;lang=fr&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;%252A.css" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}a.new,#quickbar a.new{color:#ba0000}

/* cache key: wiki1000dbtahoe-l1000_:resourceloader:filter:minify-css:4:c88e2bcd56513749bec09a7e29cb3ffa */
</style>
<script src="../load.php@debug=false&amp;lang=fr&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;%252A"></script>
<script>if(window.mw){
	mw.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "Vue_locale_(langage)", "wgTitle": "Vue locale (langage)", "wgCurRevisionId": 14642, "wgArticleId": 2920, "wgIsArticle": true, "wgAction": "view", "wgUserName": null, "wgUserGroups": ["*"], "wgCategories": ["Langage", "Vue de classe", "Version650", "Version11"], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": []});
}
</script><script>if(window.mw){
	mw.loader.load(["mediawiki.page.startup"]);
}
</script>
<style type="text/css">/*<![CDATA[*/
.source-delphi {line-height: normal;}
.source-delphi li, .source-delphi pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for delphi
 * CSS class: source-delphi, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.delphi.source-delphi .de1, .delphi.source-delphi .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.delphi.source-delphi  {font-family:monospace;}
.delphi.source-delphi .imp {font-weight: bold; color: red;}
.delphi.source-delphi li, .delphi.source-delphi .li1 {font-weight: normal; vertical-align:top;}
.delphi.source-delphi .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.delphi.source-delphi .li2 {font-weight: bold; vertical-align:top;}
.delphi.source-delphi .kw1 {color: #000000; font-weight: bold;}
.delphi.source-delphi .kw2 {color: #000000; font-weight: bold;}
.delphi.source-delphi .kw3 {color: #000066;}
.delphi.source-delphi .kw4 {color: #000066; font-weight: bold;}
.delphi.source-delphi .co1 {color: #808080; font-style: italic;}
.delphi.source-delphi .co2 {color: #008000; font-style: italic;}
.delphi.source-delphi .coMULTI {color: #808080; font-style: italic;}
.delphi.source-delphi .es0 {color: #ff0000; font-weight: bold;}
.delphi.source-delphi .br0 {color: #000066;}
.delphi.source-delphi .sy0 {color: #000066;}
.delphi.source-delphi .sy1 {color: #000066;}
.delphi.source-delphi .sy2 {color: #000066;}
.delphi.source-delphi .sy3 {color: #000066;}
.delphi.source-delphi .st0 {color: #ff0000;}
.delphi.source-delphi .nu0 {color: #0000ff;}
.delphi.source-delphi .me1 {color: #006600;}
.delphi.source-delphi .re0 {color: #9ac;}
.delphi.source-delphi .re1 {color: #ff0000;}
.delphi.source-delphi .ln-xtra, .delphi.source-delphi li.ln-xtra, .delphi.source-delphi div.ln-xtra {background-color: #ffc;}
.delphi.source-delphi span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
@import "https://frp.sage.fr/wiki1000/index.php?title=MediaWiki:Geshi.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
/*]]>*/
</style></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Vue_locale_langage action-view skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">Vue locale (langage)</h1>
	<div id="bodyContent">
		<div id="siteSub">De Wiki1000</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav">Aller à : <a href="Vue_locale_(langage).html#column-one">Navigation</a>, <a href="Vue_locale_(langage).html#searchInput">rechercher</a></div>
		<!-- start content -->
<div lang="fr" dir="ltr" class="mw-content-ltr"><p><img src="../medias/images/stock/version650-32x32.png" alt="version650-32x32.png" />
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Sommaire</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Vue_locale_(langage).html#Exemples"><span class="tocnumber">1</span> <span class="toctext">Exemples</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="Vue_locale_(langage).html#Curseur_sur_une_classe_vue"><span class="tocnumber">1.1</span> <span class="toctext">Curseur sur une classe vue</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="Vue_locale_(langage).html#Vue_avec_jointure_externe"><span class="tocnumber">1.2</span> <span class="toctext">Vue avec jointure externe</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Vue_locale_(langage).html#Vue_sur_une_interface"><span class="tocnumber">1.3</span> <span class="toctext">Vue sur une interface</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Vue_locale_(langage).html#Vue_sur_des_combinaisons_uniques_d.27attributs"><span class="tocnumber">1.4</span> <span class="toctext">Vue sur des combinaisons uniques d'attributs</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Vue_locale_(langage).html#Vue_avec_agr.C3.A9gats"><span class="tocnumber">1.5</span> <span class="toctext">Vue avec agrégats</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="Vue_locale_(langage).html#Vue_avec_agr.C3.A9gats_sur_un_montant"><span class="tocnumber">1.6</span> <span class="toctext">Vue avec agrégats sur un montant</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Vue_locale_(langage).html#Vue_avec_agr.C3.A9gats_sur_un_attribut_enfant"><span class="tocnumber">1.7</span> <span class="toctext">Vue avec agrégats sur un attribut enfant</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="Vue_locale_(langage).html#Vue_avec_un_op.C3.A9rateur_de_date"><span class="tocnumber">1.8</span> <span class="toctext">Vue avec un opérateur de date</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Vue_locale_(langage).html#Vue_avec_un_op.C3.A9rateur_de_date_.28diff.29"><span class="tocnumber">1.9</span> <span class="toctext">Vue avec un opérateur de date (diff)</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="Vue_locale_(langage).html#Vue_avec_r.C3.A9f.C3.A9rence"><span class="tocnumber">1.10</span> <span class="toctext">Vue avec référence</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="Vue_locale_(langage).html#Vue_avec_variable_r.C3.A9f.C3.A9rence"><span class="tocnumber">1.11</span> <span class="toctext">Vue avec variable référence</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="Vue_locale_(langage).html#Vue_avec_filtre"><span class="tocnumber">1.12</span> <span class="toctext">Vue avec filtre</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="Vue_locale_(langage).html#Vue_avec_travers.C3.A9e_de_liste"><span class="tocnumber">1.13</span> <span class="toctext">Vue avec traversée de liste</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="Vue_locale_(langage).html#Vue_avec_jointure_sur_une_classe"><span class="tocnumber">1.14</span> <span class="toctext">Vue avec jointure sur une classe</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="Vue_locale_(langage).html#Vue_avec_jointures_li.C3.A9es"><span class="tocnumber">1.15</span> <span class="toctext">Vue avec jointures liées</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="Vue_locale_(langage).html#Jointure_avec_filtre_idOTP"><span class="tocnumber">1.16</span> <span class="toctext">Jointure avec filtre idOTP</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="Vue_locale_(langage).html#Vue_avec_sous_requ.C3.AAtes"><span class="tocnumber">1.17</span> <span class="toctext">Vue avec sous requêtes</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="Vue_locale_(langage).html#Vue_avec_interface_.28Union.29"><span class="tocnumber">1.18</span> <span class="toctext">Vue avec interface (Union)</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="Vue_locale_(langage).html#Vue_utilisant_une_CTE_.28Commun_table_expression.29"><span class="tocnumber">1.19</span> <span class="toctext">Vue utilisant une CTE (Commun table expression)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="Vue_locale_(langage).html#Directive_d.27attribut"><span class="tocnumber">2</span> <span class="toctext">Directive d'attribut</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="Vue_locale_(langage).html#Directive_primary"><span class="tocnumber">3</span> <span class="toctext">Directive primary</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="Vue_locale_(langage).html#Directive_orderby"><span class="tocnumber">4</span> <span class="toctext">Directive orderby</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="Vue_locale_(langage).html#Op.C3.A9rateurs"><span class="tocnumber">5</span> <span class="toctext">Opérateurs</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="Vue_locale_(langage).html#Op.C3.A9rateur_portant_sur_une_colonne"><span class="tocnumber">5.1</span> <span class="toctext">Opérateur portant sur une colonne</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="Vue_locale_(langage).html#Op.C3.A9rateur_portant_sur_un_type_num.C3.A9rique"><span class="tocnumber">5.2</span> <span class="toctext">Opérateur portant sur un type numérique</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="Vue_locale_(langage).html#Op.C3.A9rateur_portant_sur_une_chaine"><span class="tocnumber">5.3</span> <span class="toctext">Opérateur portant sur une chaine</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="Vue_locale_(langage).html#Op.C3.A9rateur_portant_sur_OID"><span class="tocnumber">5.4</span> <span class="toctext">Opérateur portant sur OID</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="Vue_locale_(langage).html#Op.C3.A9rateur_portant_sur_une_date"><span class="tocnumber">5.5</span> <span class="toctext">Opérateur portant sur une date</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="Vue_locale_(langage).html#Op.C3.A9rateur_portant_sur_une_r.C3.A9f.C3.A9rence"><span class="tocnumber">5.6</span> <span class="toctext">Opérateur portant sur une référence</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="Vue_locale_(langage).html#Op.C3.A9rateur_DateAdd"><span class="tocnumber">5.7</span> <span class="toctext">Opérateur DateAdd</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="Vue_locale_(langage).html#Op.C3.A9rateur_GetValue"><span class="tocnumber">5.8</span> <span class="toctext">Opérateur GetValue</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-33"><a href="Vue_locale_(langage).html#Agr.C3.A9gat_portant_sur_un_montant"><span class="tocnumber">6</span> <span class="toctext">Agrégat portant sur un montant</span></a></li>
<li class="toclevel-1 tocsection-34"><a href="Vue_locale_(langage).html#Expression_SQL"><span class="tocnumber">7</span> <span class="toctext">Expression SQL</span></a></li>
<li class="toclevel-1 tocsection-35"><a href="Vue_locale_(langage).html#Vue_de_mod.C3.A8le_utilisant_une_vue_locale"><span class="tocnumber">8</span> <span class="toctext">Vue de modèle utilisant une vue locale</span></a>
<ul>
<li class="toclevel-2 tocsection-36"><a href="Vue_locale_(langage).html#Param.C3.A8tre_de_GetSelector"><span class="tocnumber">8.1</span> <span class="toctext">Paramètre de GetSelector</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<p><br />
Les vues locales sont des type de données vues déclarées localement à l'intérieur d'une opération.
</p><p>Par exemple le code suivant déclare une vue MyView et effectue une recherche sur cette vue&#160;:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassA<span class="br0">&#41;</span>
  unCode<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeA<span class="sy1">;</span>
  unEntier<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> refB<span class="sy1">.</span><span class="me1">unEntierB</span><span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">var</span> inst<span class="sy1">:</span>MyView<span class="sy1">;</span>
<span class="kw1">begin</span>
  inst <span class="sy1">:</span><span class="sy3">=</span> MyView<span class="sy1">.</span><span class="me1">Find</span><span class="br0">&#40;</span><span class="st0">'unCode=%1'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="st0">'B1'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
  <span class="kw1">if</span> <span class="kw3">Assigned</span><span class="br0">&#40;</span>inst<span class="br0">&#41;</span> <span class="kw1">then</span>
   <span class="kw1">begin</span>
     <span class="sy1">...</span>
   <span class="kw1">end</span><span class="sy1">;</span>
<span class="kw1">end</span></pre></div></div>
<p>Le périmètre du type est limité à la procédure, il n'est donc pas possible de passer les objets de la vue en paramètre à d'autres fonctions (pour cela utilisez une vue globale).
</p><p>La syntaxe pour définir une vue locale&#160;:
</p>
<pre>
  BNF style grammar&#160;: 

  &lt;nom_vue&gt;&#160;::= ViewOf(&lt;class_dec&gt;) [&lt;attributes&gt;] end 
  &lt;class_dec&gt;&#160;::= &lt;class_names&gt; | &lt;class_name&gt; &lt;class_dec&gt;
  &lt;class_names&gt;&#160;::= &lt;class_name&gt;| [&lt;class_name&gt; ,]
  &lt;class_name&gt;&#160;::= identifier
  &lt;class_dec&gt;&#160;::= distinct
  &lt;attributes&gt;&#160;::= &lt;attribute_def&gt; | &lt;attribute_def&gt; &lt;where_def&gt;
  &lt;attribute_def&gt;&#160;::= &lt;simple_attribute_def&gt; | &lt;simple_attribute_def&gt; &lt;attribute_directive&gt; 
  &lt;simple_attribute_def&gt;&#160;::= &lt;attribute_dec&gt; | &lt;attribute_dec&gt; = &lt;attribute_ref&gt;
  &lt;attribute_dec&gt;&#160;::= &lt;attribute_name&gt;&#160;: &lt;type_name&gt;
  &lt;attribute_ref&gt;&#160;::= &lt;main_class_attribute_name&gt; | &lt;operator&gt;(&lt;main_class_attribute_name&gt;)
  &lt;operator&gt;&#160;::= &lt;aggregate_operator&gt; | &lt;date_operator&gt; | &lt;join_operator&gt;
  &lt;aggregate_operator&gt;&#160;::= count|sum|max|min
  &lt;date_operator&gt;&#160;::= year|month|quarter|week|day|dayofyear|dayofweek|hour|minute|second
  &lt;join_operator&gt;&#160;::= join
  &lt;attribute_directive&gt;&#160;::=  primary | orderby | orderby desc | over | notInSelect
  &lt;where_def&gt;&#160;::= [ &lt;expression&gt; ]

  Type
    NomDeVue = ViewOf(NomDeClassePrincipale)
      Attribut&#160;: Type;
      Attribut&#160;: Type = AliasDe;
      Attribut&#160;: Type = operator(AliasDe);
      Attribut&#160;: Type = AliasDe primary;
      Attribut&#160;: Type = AliasDe orderby;
      Attribut&#160;: Type = AliasDe orderby desc;
      [ expression ]
    end;
</pre>
<p>Les vues peuvent utiles pour effectuer des traitement sur des classes complexes, par exemples&#160;:
</p>
<h3> <span class="mw-headline" id="Exemples">Exemples</span></h3>
<h4> <span class="mw-headline" id="Curseur_sur_une_classe_vue">Curseur sur une classe vue</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassA<span class="br0">&#41;</span>
    newCode<span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span>
    unCode<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeA<span class="sy1">;</span>
    unEntier<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> refB<span class="sy1">.</span><span class="me1">unEntierB</span><span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">var</span> inst<span class="sy1">:</span>MyView<span class="sy1">;</span> cursor<span class="sy1">:</span>MyViewCursor
<span class="kw1">begin</span>
  Result <span class="sy1">:</span><span class="sy3">=</span> <span class="nu0">0</span><span class="sy1">;</span>
  cursor <span class="sy1">:</span><span class="sy3">=</span> MyView<span class="sy1">.</span><span class="me1">CreateCursorWhere</span><span class="br0">&#40;</span><span class="st0">''</span>unCode<span class="sy3">=</span>%1<span class="st0">''</span><span class="sy1">,</span><span class="st0">''</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span>S<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
  foreach inst <span class="kw1">in</span> cursor <span class="kw1">do</span>
   <span class="kw1">begin</span>
     Result <span class="sy1">:</span><span class="sy3">=</span> Result <span class="sy3">+</span> inst<span class="sy1">.</span><span class="me1">unEntier</span><span class="sy1">;</span>
   <span class="kw1">end</span><span class="sy1">;</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_jointure_externe">Vue avec jointure externe</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> ViewExternalJoin<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Boolean</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassA<span class="br0">&#41;</span>
    newCode<span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span>
    unCodeAA<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeA<span class="sy1">;</span>
    unCodeBB<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> refB<span class="sy3">+</span>unCodeB<span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
<span class="kw1">var</span> inst<span class="sy1">:</span>MyView<span class="sy1">;</span>
<span class="kw1">begin</span>
  inst <span class="sy1">:</span><span class="sy3">=</span> MyView<span class="sy1">.</span><span class="me1">Find</span><span class="br0">&#40;</span><span class="st0">'unCodeAA=%1'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span>S<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
  <span class="kw1">if</span> <span class="kw3">Assigned</span><span class="br0">&#40;</span>inst<span class="br0">&#41;</span> <span class="kw1">and</span> <span class="br0">&#40;</span>inst<span class="sy1">.</span><span class="me1">unCodeAA</span><span class="sy3">=</span>S<span class="br0">&#41;</span>
     <span class="kw1">then</span> Result <span class="sy1">:</span><span class="sy3">=</span> <span class="kw2">True</span>
     <span class="kw1">else</span> Result <span class="sy1">:</span><span class="sy3">=</span> <span class="kw2">False</span><span class="sy1">;</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_sur_une_interface">Vue sur une interface</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>InterfaceA<span class="sy1">,</span> ClassA1<span class="sy1">,</span> ClassA2<span class="br0">&#41;</span>
    unCode<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeA primary<span class="sy1">;</span>
    <span class="sy1">....</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">begin</span>
  <span class="sy1">...</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_sur_des_combinaisons_uniques_d.27attributs">Vue sur des combinaisons uniques d'attributs</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassA distinct<span class="br0">&#41;</span>
    unCode<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeA primary<span class="sy1">;</span>
    unEntier<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> refB<span class="sy1">.</span><span class="me1">unEntierB</span><span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">begin</span>
  <span class="sy1">...</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_agr.C3.A9gats">Vue avec agrégats</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassA<span class="br0">&#41;</span>
    unCode<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeA primary<span class="sy1">;</span>
    unEntier<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span>unEntier<span class="br0">&#41;</span><span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">begin</span>
  <span class="sy1">...</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_agr.C3.A9gats_sur_un_montant">Vue avec agrégats sur un montant</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">Type</span>
  myView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>WFClasseX<span class="br0">&#41;</span>
   mysum<span class="sy1">:</span>TMoney <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span>credit<span class="br0">&#41;</span> orderby<span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">var</span> sel<span class="sy1">:</span>TSelector<span class="sy1">;</span> inst<span class="sy1">:</span>MyView<span class="sy1">;</span> S<span class="sy1">,</span>stag<span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span>
<span class="kw1">begin</span>
  sel <span class="sy1">:</span><span class="sy3">=</span> MyView<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span><span class="st0">''</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
&#160;
  S <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">''</span><span class="sy1">;</span> stag <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">''</span><span class="sy1">;</span>
  foreach inst <span class="kw1">in</span> Sel<span class="sy1">.</span><span class="me1">AsCursor</span> <span class="kw1">do</span>
   <span class="kw1">begin</span>
     S <span class="sy1">:</span><span class="sy3">=</span> S<span class="sy3">+</span>stag<span class="sy3">+</span><span class="kw3">Formatfloat</span><span class="br0">&#40;</span><span class="st0">'0.00'</span><span class="sy1">,</span>inst<span class="sy1">.</span><span class="me1">mysum</span><span class="sy1">.</span><span class="me1">Value</span><span class="br0">&#41;</span><span class="sy1">;</span>
     stag <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">','</span><span class="sy1">;</span>
   <span class="kw1">end</span><span class="sy1">;</span>
  showmessage<span class="br0">&#40;</span>S<span class="br0">&#41;</span><span class="sy1">;</span>
&#160;
  Result <span class="sy1">:</span><span class="sy3">=</span> <span class="kw2">FALSE</span><span class="sy1">;</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<pre>
select sum(t0.credit) &quot;mysum&quot;,t0.credit_CodeDevise &quot;mysum_CodeDevise&quot; from dbo.WFCLASSEX t0
group by t0.credit_CodeDevise
order by sum(t0.credit)
</pre>
<h4> <span class="mw-headline" id="Vue_avec_agr.C3.A9gats_sur_un_attribut_enfant">Vue avec agrégats sur un attribut enfant</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">Type</span>
  myView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>WFClasseX<span class="br0">&#41;</span>
   mysum<span class="sy1">:</span>TMoney <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span>credit<span class="sy1">:</span>TCValue<span class="br0">&#41;</span> orderby<span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
<span class="kw1">begin</span>
  <span class="sy1">...</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<pre>
select sum(t0.credit_TCValue) &quot;mysum&quot; from dbo.WFCLASSEX t0
order by sum(t0.credit_TCValue)
</pre>
<h4> <span class="mw-headline" id="Vue_avec_un_op.C3.A9rateur_de_date">Vue avec un opérateur de date</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassC distinct<span class="br0">&#41;</span>
    unCode<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeC primary<span class="sy1">;</span>
    unMois<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> month<span class="br0">&#40;</span>uneDate<span class="br0">&#41;</span><span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">begin</span>
  <span class="sy1">...</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_un_op.C3.A9rateur_de_date_.28diff.29">Vue avec un opérateur de date (diff)</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span>iDayDiff<span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassC distinct<span class="br0">&#41;</span>
    unCode<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeC primary<span class="sy1">;</span>
    DayDiff<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> DayDiff<span class="br0">&#40;</span>uneDateStart<span class="sy1">,</span>uneDateEnd<span class="br0">&#41;</span><span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">begin</span>
  inst <span class="sy1">:</span><span class="sy3">=</span> MyView<span class="sy1">.</span><span class="me1">Find</span><span class="br0">&#40;</span><span class="st0">'DayDiff &gt;=&#160;%1'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span>iDayDiff<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
    <span class="kw1">if</span> <span class="kw3">Assigned</span><span class="br0">&#40;</span>inst<span class="br0">&#41;</span>
       <span class="kw1">then</span> Result <span class="sy1">:</span><span class="sy3">=</span> inst<span class="sy1">.</span><span class="me1">unCode</span>
       <span class="kw1">else</span> Result <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">'Not found'</span><span class="sy1">;</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_r.C3.A9f.C3.A9rence">Vue avec référence</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassA<span class="br0">&#41;</span>
    unCodeAA<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeA<span class="sy1">;</span>
    refB<span class="sy1">:</span>reference <span class="sy3">=</span> refB<span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">begin</span>
  <span class="sy1">...</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassA<span class="br0">&#41;</span>
    unCodeAA<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeA<span class="sy1">;</span>
    refB<span class="sy1">:</span>ClassB <span class="sy3">=</span> refB<span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">begin</span>
  <span class="sy1">...</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_variable_r.C3.A9f.C3.A9rence">Vue avec variable référence</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassA<span class="br0">&#41;</span>
    unCodeAA<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeA<span class="sy1">;</span>
    refB<span class="sy1">:</span>ClassB<span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">begin</span>
  <span class="sy1">...</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_filtre">Vue avec filtre</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> foo<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassA<span class="br0">&#41;</span>
    unCodeAA<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeA<span class="sy1">;</span>
    unCodeBB<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> refB<span class="sy1">.</span><span class="me1">unCodeB</span><span class="sy1">;</span>
    <span class="br0">&#91;</span> unCodeA<span class="sy3">=</span><span class="st0">'A1'</span> <span class="br0">&#93;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">begin</span>
  <span class="sy1">...</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_travers.C3.A9e_de_liste">Vue avec traversée de liste</span></h4>
<p><a href="Fichier%253AView-list-1.jpg.html" class="image"><img alt="View-list-1.jpg" src="../images/0/0b/View-list-1.jpg" width="488" height="82" /></a>
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> _Concat<span class="br0">&#40;</span><span class="kw1">const</span> S<span class="sy1">:</span><span class="kw4">string</span><span class="br0">&#41;</span><span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span>
<span class="kw1">Type</span>
  MyView <span class="sy3">=</span> viewof<span class="br0">&#40;</span>ClassF<span class="br0">&#41;</span>
    unCodeF<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> unCodeF<span class="sy1">;</span>
    unCodeG<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> refFG<span class="sy1">.</span><span class="me1">unCodeG</span><span class="sy1">;</span>
    unCodeH<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> refFG<span class="sy1">.</span><span class="me1">listH</span><span class="sy1">.</span><span class="me1">unCodeH</span><span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">var</span> ls<span class="sy1">:</span>MyViewList<span class="sy1">;</span> stag<span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span> idx<span class="sy1">:</span><span class="kw4">integer</span><span class="sy1">;</span>
<span class="kw1">begin</span>
  ls <span class="sy1">:</span><span class="sy3">=</span> MyView<span class="sy1">.</span><span class="me1">CreateListWhere</span><span class="br0">&#40;</span><span class="st0">'unCodeG=%1'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="st0">'unCodeH'</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="sy3">-</span>1<span class="sy1">,</span><span class="br0">&#91;</span>S<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
  Result <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">''</span><span class="sy1">;</span> stag <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">''</span><span class="sy1">;</span>
  <span class="kw1">for</span> idx<span class="sy1">:</span><span class="sy3">=</span>0 <span class="kw1">to</span> ls<span class="sy1">.</span><span class="me1">Count</span><span class="sy3">-</span>1 <span class="kw1">do</span>
   <span class="kw1">begin</span>
     Result <span class="sy1">:</span><span class="sy3">=</span> Result<span class="sy3">+</span>stag<span class="sy3">+</span>ls<span class="sy1">.</span><span class="me1">Refs</span><span class="br0">&#91;</span>idx<span class="br0">&#93;</span><span class="sy1">.</span><span class="me1">unCodeH</span><span class="sy1">;</span>
     stag <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">','</span><span class="sy1">;</span>
   <span class="kw1">end</span><span class="sy1">;</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_jointure_sur_une_classe">Vue avec jointure sur une classe</span></h4>
<pre>
Type
  myView = class(myClass)
    vp1:joinClass1 = join(A,B);
    vp2:JoinClass2 = join(A,B,W);
    vp3:JoinClass3 = join(W);
    ....
  end;
</pre>
<table class="wikitable">

<tr>
<th>Paramètre
</th>
<th>Usage
</th></tr>
<tr>
<td>A
</td>
<td>Attribut de la classe join (joinClass)
</td></tr>
<tr>
<td>B
</td>
<td>Chemin à partir de la classe base (myView)
</td></tr>
<tr>
<td>W
</td>
<td>Clause Where sur la classe join
</td></tr></table>
<p>La clause Where peut être exprimée avec les préfixes&#160;:
</p>
<table class="wikitable">

<tr>
<td>self
</td>
<td>Préfixe de la classe de base
</td></tr>
<tr>
<td>?
</td>
<td>Préfixe de la classe Join
</td></tr>
<tr>
<td>xx
</td>
<td>alias d'une jointure de classe
</td></tr></table>
<div style="font-color:#535068; border:solid 1px #A8A8A8; padding:0.5em 1em 0.5em 0.7em; margin:0.5em 0em; background-color:#F9F9F9;font-size:100%;">
<table style="background-color:#F9F9F9;">
<tr>
<td><a href="Fichier%253ATip-20px.png.html" class="image"><img alt="Tip-20px.png" src="../images/5/5e/Tip-20px.png" width="20" height="20" /></a>
</td>
<td><b>Tip&#160;:</b> Il est possible de créer un produit cartésien entre deux classes en utilisant une jointure avec une clause where toujours vraie.
</td></tr></table>
</div>
<div style="font-color:#535068; border:solid 1px #A8A8A8; padding:0.5em 1em 0.5em 0.7em; margin:0.5em 0em; background-color:#F9F9F9;font-size:100%;">
<table style="background-color:#F9F9F9;">
<tr>
<td><a href="Fichier%253ATip-20px.png.html" class="image"><img alt="Tip-20px.png" src="../images/5/5e/Tip-20px.png" width="20" height="20" /></a>
</td>
<td><b>Tip&#160;:</b> Les jointures seront générées dans l'ordre de leur déclaration dans la vue.
</td></tr></table>
</div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="co1">//Procedure expensePendings(req:Tjson; var res:TObject);</span>
<span class="kw1">Type</span>
  ExpenseView <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TNoteFrais<span class="br0">&#41;</span>
   vp<span class="sy1">:</span> TValideurPossible <span class="sy3">=</span> join<span class="br0">&#40;</span>ValidationEtat<span class="sy1">.</span><span class="me1">EtatPossible</span><span class="sy1">.</span><span class="me1">EtatMetier</span><span class="sy1">,</span> EtatNF<span class="br0">&#41;</span><span class="sy1">;</span>
   aManager<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">ContactEtablissement</span><span class="sy1">.</span><span class="me1">oidutilisateur</span><span class="sy1">;</span>
   <span class="co1">//</span>
   aDate<span class="sy1">:</span><span class="kw4">TDatetime</span> <span class="sy3">=</span> nDate<span class="sy1">;</span>
   aRef<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> referencePiece<span class="sy1">;</span>
   aReason<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> Caption<span class="sy1">;</span>
   aAmountOrg<span class="sy1">:</span>TMoney <span class="sy3">=</span> MontantTTC<span class="sy1">;</span>
   aAmountAct<span class="sy1">:</span>TMoney <span class="sy3">=</span> MontantRetenu<span class="sy1">;</span>
   aQuantity<span class="sy1">:</span>TQuantity <span class="sy3">=</span> Quantite<span class="sy1">;</span>
   aUser<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> Salarie<span class="sy1">.</span><span class="me1">Operateur</span><span class="sy1">.</span><span class="me1">oidutilisateur</span><span class="sy1">;</span>
   aType<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> FraisSalarie<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span>
   aMode<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> FraisSalarie<span class="sy1">.</span><span class="me1">modeRemboursement</span><span class="sy1">;</span>
   aAmountMax<span class="sy1">:</span>TMoney <span class="sy3">=</span> FraisSalarie<span class="sy1">.</span><span class="me1">montantPlafond</span><span class="sy1">;</span>
   aStatus<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> Statut<span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">var</span> json<span class="sy1">:</span>TJson<span class="sy1">;</span> ls<span class="sy1">:</span>TSelector<span class="sy1">;</span> indx<span class="sy1">,</span>ctn<span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span> inst<span class="sy1">:</span>ExpenseView<span class="sy1">;</span>
    AWhere<span class="sy1">,</span>AOrder<span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span> Args<span class="sy1">:</span><span class="kw1">Array</span><span class="br0">&#91;</span>0<span class="sy1">..</span>5<span class="br0">&#93;</span> <span class="kw1">of</span> <span class="kw4">variant</span><span class="sy1">;</span>
<span class="kw1">begin</span>
  json <span class="sy1">:</span><span class="sy3">=</span> TJson<span class="sy1">.</span><span class="me1">Create</span><span class="br0">&#40;</span><span class="st0">''</span><span class="br0">&#41;</span><span class="sy1">;</span>
  res  <span class="sy1">:</span><span class="sy3">=</span> json<span class="sy1">;</span>
  <span class="co1">//</span>
  AWhere <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">'(aManager=%1) and (aStatus=%2)'</span><span class="sy1">;</span>
  Args<span class="br0">&#91;</span>0<span class="br0">&#93;</span> <span class="sy1">:</span><span class="sy3">=</span> GlbUserName<span class="sy1">;</span>
  Args<span class="br0">&#91;</span>1<span class="br0">&#93;</span> <span class="sy1">:</span><span class="sy3">=</span> StatutNF_AValider<span class="sy1">;</span>
  AOrder <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">'aUser,-aDate'</span><span class="sy1">;</span>
&#160;
  indx <span class="sy1">:</span><span class="sy3">=</span> <span class="nu0">0</span><span class="sy1">;</span> ctn <span class="sy1">:</span><span class="sy3">=</span> <span class="nu0">0</span><span class="sy1">;</span> 
  ls <span class="sy1">:</span><span class="sy3">=</span> ExpenseView<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span>AWhere<span class="sy1">,</span>AOrder<span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span>Args<span class="br0">&#41;</span><span class="sy1">;</span>
  foreachP inst <span class="kw1">in</span> ls<span class="sy1">.</span><span class="me1">AsCursor</span> <span class="kw1">do</span>
   <span class="kw1">begin</span>
     <span class="sy1">.</span> <span class="sy1">.</span> <span class="sy1">.</span> 
   <span class="kw1">end</span><span class="sy1">;</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<p>Dans cet exemple le modèle est celui-ci&#160;:
</p><p><a href="Fichier%253AView-join-2.jpg.html" class="image"><img alt="View-join-2.jpg" src="../images/f/f8/View-join-2.jpg" width="592" height="290" /></a>
</p><p>La classe TEtatMetier est atteinte par deux chemins différents, un issu de la classe TValideurPossible et un issu de la classe TNoteFrais. La jointure est réalisée sur l'objet TEtatMetier. 
</p>
<pre>
   vp: TValideurPossible = join(ValidationEtat.EtatPossible.EtatMetier, EtatNF);
</pre>
<ul><li> TValideurPossible est la classe qui va être jointe 
</li><li> vp défini un alias sur cette classe qui peut être ensuite utilisé dans la définition de la vue.
</li><li> ValidationEtat.EtatPossible.EtatMetier est le chemin issu de la classe jointe
</li><li> EtatNF est le chemin issu de la classe de la vue.
</li></ul>
<p><br />
<b>Exemple, vue locale avec produit cartésien, jointure par clause where et sous requêtes</b>
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="co1">//procedure RubriqueParExerciceDetail;</span>
<span class="kw1">Type</span>
  vueSolde <span class="sy3">=</span> viewof<span class="br0">&#40;</span>TCumulPeriodeCompte<span class="br0">&#41;</span>
   codeCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> CompteGeneral<span class="sy1">.</span><span class="me1">codeCompte</span><span class="sy1">;</span>
   datePeriode<span class="sy1">:</span><span class="kw4">TDatetime</span> <span class="sy3">=</span> Periode<span class="sy1">.</span><span class="me1">dateDebut</span><span class="sy1">;</span>
   value<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> sumDiff<span class="br0">&#40;</span>debitTenue<span class="sy1">,</span>creditTenue<span class="br0">&#41;</span><span class="sy1">;</span> 
   oidExercice<span class="sy1">:</span>TOID <span class="sy3">=</span> Periode<span class="sy1">.</span><span class="me1">oidexercice</span><span class="sy1">;</span> 
   <span class="br0">&#91;</span><span class="br0">&#40;</span>typeLot<span class="sy3">=</span>1<span class="br0">&#41;</span><span class="br0">&#93;</span> 
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
  vueSelection <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TSelectionCompte<span class="br0">&#41;</span> 
   vc<span class="sy1">:</span>TCompteGeneral <span class="sy3">=</span> join<span class="br0">&#40;</span><span class="st0">'(codeCompte&gt;=self.compteInferieur) and (codeCompte&lt;=self.compteSuperieur)'</span><span class="br0">&#41;</span><span class="sy1">;</span>
   vp<span class="sy1">:</span>TPeriode <span class="sy3">=</span> join<span class="br0">&#40;</span><span class="st0">'(1=1)'</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   ve<span class="sy1">:</span>TExercice <span class="sy3">=</span> join<span class="br0">&#40;</span>oid<span class="sy1">,</span>vp<span class="sy1">.</span><span class="me1">oidexercice</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   ve1<span class="sy1">:</span>TExercice <span class="sy3">=</span> join<span class="br0">&#40;</span><span class="st0">'(?.dateDebut = DateAdd(dpyear,ve.dateDebut,-1))'</span><span class="br0">&#41;</span><span class="sy1">;</span>
  <span class="co1">// </span>
   idCompteGeneral<span class="sy1">:</span>TOID <span class="sy3">=</span> vc<span class="sy1">.</span><span class="me1">oid</span> primary<span class="sy1">;</span> 
   idRubrique<span class="sy1">:</span>TOID <span class="sy3">=</span> oidRubriqueCompte primary<span class="sy1">;</span> 
   idPeriode<span class="sy1">:</span>TOID <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">oid</span> primary<span class="sy1">;</span>
   idExercice<span class="sy1">:</span>TOID <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">oidexercice</span><span class="sy1">;</span> 
   idExerciceN1<span class="sy1">:</span>TOID <span class="sy3">=</span> ve1<span class="sy1">.</span><span class="me1">oid</span><span class="sy1">;</span>
   <span class="co1">// </span>
   codeRubrique<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> RubriqueCompte<span class="sy1">.</span><span class="me1">code</span> orderby<span class="sy1">;</span> 
   libelleRubrique<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> RubriqueCompte<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span> 
   codeCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> vc<span class="sy1">.</span><span class="me1">codeCompte</span> orderby<span class="sy1">;</span>
   libelleCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> vc<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span> 
   libellePeriode<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span> 
   <span class="co1">// </span>
   datePeriode<span class="sy1">:</span><span class="kw4">TDatetime</span> <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">dateDebut</span> orderby desc<span class="sy1">;</span>
   year<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> year<span class="br0">&#40;</span>vp<span class="sy1">.</span><span class="me1">dateDebut</span><span class="br0">&#41;</span><span class="sy1">;</span>
   month<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> month<span class="br0">&#40;</span>vp<span class="sy1">.</span><span class="me1">dateDebut</span><span class="br0">&#41;</span><span class="sy1">;</span>
   valueN0<span class="sy1">:</span><span class="kw4">currency</span> <span class="sy3">=</span> VueSolde<span class="sy1">.</span><span class="me1">select</span><span class="br0">&#40;</span><span class="st0">'value'</span><span class="sy1">,</span><span class="st0">'(oidExercice=self.idExercice) and  (codeCompte=self.codeCompte) and (datePeriode&lt;=self.datePeriode)'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   valueN1<span class="sy1">:</span><span class="kw4">currency</span> <span class="sy3">=</span> VueSolde<span class="sy1">.</span><span class="me1">select</span><span class="br0">&#40;</span><span class="st0">'value'</span><span class="sy1">,</span><span class="st0">'(oidExercice=self.idExerciceN1) and  (codeCompte=self.codeCompte) and (datePeriode&lt;=DateAdd(dpYear,self.datePeriode,-1))'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span> 
 <span class="kw1">end</span><span class="sy1">;</span> 
&#160;
<span class="kw1">var</span> Sel<span class="sy1">:</span>TSelector<span class="sy1">;</span> inst<span class="sy1">:</span>vueSelection<span class="sy1">;</span> S<span class="sy1">,</span>stag<span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span>
<span class="kw1">begin</span>
  Sel   <span class="sy1">:</span><span class="sy3">=</span> vueSelection<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span><span class="st0">'(codeRubrique=%1) and (year=2022) and (month=3)'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">True</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="st0">'SIG.L02'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
&#160;
  S <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">''</span><span class="sy1">;</span> stag <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">''</span><span class="sy1">;</span> 
  forEach inst <span class="kw1">in</span> Sel<span class="sy1">.</span><span class="me1">AsCursor</span> <span class="kw1">do</span>
   <span class="kw1">begin</span>
     S <span class="sy1">:</span><span class="sy3">=</span> S<span class="sy3">+</span>stag<span class="sy3">+</span>inst<span class="sy1">.</span><span class="me1">codeCompte</span><span class="sy1">;</span>
     stag <span class="sy1">:</span><span class="sy3">=</span> <span class="st0">','</span><span class="sy1">;</span> 
   <span class="kw1">end</span><span class="sy1">;</span> 
  showMessage<span class="br0">&#40;</span>S<span class="br0">&#41;</span><span class="sy1">;</span> 
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<div style="font-color:#535068; border:solid 1px #A8A8A8; padding:0.5em 1em 0.5em 0.7em; margin:0.5em 0em; background-color:#F9F9F9;font-size:100%;">
<table style="background-color:#F9F9F9;">
<tr>
<td><a href="Fichier%253ATip-20px.png.html" class="image"><img alt="Tip-20px.png" src="../images/5/5e/Tip-20px.png" width="20" height="20" /></a>
</td>
<td><b>Tip&#160;:</b> Notez l'opérateur SQL DateAdd() qui peut être utilisé dans la partie littérale d'une expression
</td></tr></table>
</div>
<h4> <span class="mw-headline" id="Vue_avec_jointures_li.C3.A9es">Vue avec jointures liées</span></h4>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"> <span class="kw1">Type</span>
  VueValideur <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TPieceTaxable<span class="br0">&#41;</span>
   vp1<span class="sy1">:</span> TValideurPossible <span class="sy3">=</span> join<span class="br0">&#40;</span>ValidationEtat<span class="sy1">.</span><span class="me1">EtatPossible</span><span class="sy1">.</span><span class="me1">EtatMetier</span><span class="sy1">,</span>EtatMetier<span class="br0">&#41;</span><span class="sy1">;</span>
   vp2<span class="sy1">:</span> TValideurPossible <span class="sy3">=</span> join<span class="br0">&#40;</span>ValidationEtat<span class="sy1">.</span><span class="me1">RegleValidation</span><span class="sy1">,</span>RegleValidation<span class="br0">&#41;</span><span class="sy1">;</span>
   gcv<span class="sy1">:</span> TGroupeContactValidation <span class="sy3">=</span> leftjoin<span class="br0">&#40;</span>TGroupeValidation<span class="sy1">,</span>vp2<span class="sy1">.</span><span class="me1">ContactEtablissement</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   aId1<span class="sy1">:</span>TOID <span class="sy3">=</span> vp1<span class="sy1">.</span><span class="me1">oid</span><span class="sy1">;</span>
   aId2<span class="sy1">:</span>TOID <span class="sy3">=</span> vp2<span class="sy1">.</span><span class="me1">oid</span><span class="sy1">;</span> 
   <span class="co1">// </span>
   <span class="sy1">...</span>
   <span class="br0">&#91;</span> <span class="br0">&#40;</span>aId1<span class="sy3">=</span>aId2<span class="br0">&#41;</span> <span class="kw1">and</span> <span class="sy1">...</span> <span class="br0">&#93;</span> 
  <span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<p>Dans cet exemple&#160;:
</p>
<ul><li> vp1 et vp2 sont deux jointures qui coincident sur le même tuple.
</li><li> La coincidence des deux jointures est réalisée par le clause where (aId1=aId2)
</li><li> gcv est une jointure sur le tuple défini par vp1 et vp2
</li></ul>
<h4> <span class="mw-headline" id="Jointure_avec_filtre_idOTP">Jointure avec filtre idOTP</span></h4>
<p>Utilisez la fonction littérale OTP() pour filtrer sur la valeur de idOTP
</p><p>Exemple&#160;: 
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">Type</span>
  vueSoldeClient <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TCumulPeriodeAuxiliaire<span class="br0">&#41;</span>
   vnc<span class="sy1">:</span>TNormeComptable <span class="sy3">=</span> join<span class="br0">&#40;</span>oid<span class="sy1">,</span>oidnormeComptable<span class="br0">&#41;</span><span class="sy1">;</span> 
   van<span class="sy1">:</span>TApprocheNorme <span class="sy3">=</span> join<span class="br0">&#40;</span>oidTNormeComptable<span class="sy1">,</span>vnc<span class="sy1">.</span><span class="me1">oid</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   vac<span class="sy1">:</span>TApprocheComptable <span class="sy3">=</span> join<span class="br0">&#40;</span>oid<span class="sy1">,</span>van<span class="sy1">.</span><span class="me1">oidTApprocheComptable</span><span class="br0">&#41;</span><span class="sy1">;</span>
   vrt<span class="sy1">:</span>TRoleTiers <span class="sy3">=</span> join<span class="br0">&#40;</span>oid<span class="sy1">,</span>oidroleTiers<span class="sy1">,</span><span class="st0">'(?.idOTP = OTP('</span><span class="st0">'TClient'</span><span class="st0">'))'</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   codeApproche<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> vac<span class="sy1">.</span><span class="me1">code</span><span class="sy1">;</span>
   idTiers<span class="sy1">:</span>TOID <span class="sy3">=</span> vrt<span class="sy1">.</span><span class="me1">oidTiers</span><span class="sy1">;</span>
   solde<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> sumDiff<span class="br0">&#40;</span>debitTenue<span class="sy1">,</span>creditTenue<span class="br0">&#41;</span><span class="sy1">;</span>
   <span class="br0">&#91;</span><span class="br0">&#40;</span>typeLot<span class="sy3">=</span>1<span class="br0">&#41;</span> <span class="kw1">and</span> <span class="br0">&#40;</span>codeApproche<span class="sy3">=</span><span class="st0">'NAT'</span><span class="br0">&#41;</span><span class="br0">&#93;</span> 
  <span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_sous_requ.C3.AAtes">Vue avec sous requêtes</span></h4>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p><p>Il est possible de générer une sous requête liée à la requête principale en utilisant la méthode SELECT d'un sélecteur.
</p><p>La sous requêtes doit être liée à la requête principale en utilisant l'opérateur self dans la clause Where du SELECT.
</p><p>Une sous requêtes peut être utilisée soit dans la liste des colonnes, soit dans la clause Where du selecteur.
</p><p><b>Utilisation dans les colonnes&#160;:</b>
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">Type</span>
  Vue1 <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>MyClass<span class="br0">&#41;</span>
   sub1<span class="sy1">:</span>TMoney <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span><span class="sy1">...</span><span class="br0">&#41;</span><span class="sy1">;</span>
   id1<span class="sy1">:</span>TOID <span class="sy3">=</span> <span class="sy1">....;</span>
   <span class="sy1">....</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
  Vue2 <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>MyClass<span class="br0">&#41;</span>
   sum1<span class="sy1">:</span>TMoney <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span><span class="sy1">...</span><span class="br0">&#41;</span><span class="sy1">;</span>
   sum2<span class="sy1">:</span>TMoney <span class="sy3">=</span> Vue1<span class="sy1">.</span><span class="me1">Select</span><span class="br0">&#40;</span><span class="st0">'sub1'</span><span class="sy1">,</span><span class="st0">'(id1=self.id2)'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
   id2<span class="sy1">:</span>TOID <span class="sy3">=</span> <span class="sy1">...;</span>
   <span class="sy1">....</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">var</span> sel<span class="sy1">:</span>TSelector<span class="sy1">;</span>
<span class="kw1">begin</span>
  sel <span class="sy1">:</span><span class="sy3">=</span> Vue2<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span><span class="st0">''</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
  <span class="co1">//</span>
  <span class="sy1">...</span> 
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<p><b>Utilisation dans la clause Where&#160;:</b>
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">Type</span>
  Vue1 <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>MyClass<span class="br0">&#41;</span>
   sub1<span class="sy1">:</span>TMoney <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span><span class="sy1">...</span><span class="br0">&#41;</span><span class="sy1">;</span>
   id1<span class="sy1">:</span>TOID <span class="sy3">=</span> <span class="sy1">....;</span>
   <span class="sy1">....</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
  Vue2 <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>MyClass<span class="br0">&#41;</span>
   sum1<span class="sy1">:</span>TMoney <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span><span class="sy1">...</span><span class="br0">&#41;</span><span class="sy1">;</span>
   id2<span class="sy1">:</span>TOID <span class="sy3">=</span> <span class="sy1">...;</span>
   <span class="sy1">....</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">var</span> sel<span class="sy1">:</span>TSelector<span class="sy1">;</span>
<span class="kw1">begin</span>
  sel <span class="sy1">:</span><span class="sy3">=</span> Vue2<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span><span class="st0">'(sum1&gt;%1)'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span>
    Vue1<span class="sy1">.</span><span class="me1">Select</span><span class="br0">&#40;</span><span class="st0">'sub1'</span><span class="sy1">,</span><span class="st0">'(id1=self.id2)'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
  <span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
  <span class="co1">//</span>
  <span class="sy1">...</span> 
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<p><b>Avec des paramètres&#160;:</b>
</p><p>Il est possible de paramétrer une sous requête en utilisant les paramètres de la requête principale&#160;:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">Type</span>
  Vue1 <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>MyClass<span class="br0">&#41;</span>
   sub1<span class="sy1">:</span>TMoney <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span><span class="sy1">...</span><span class="br0">&#41;</span><span class="sy1">;</span>
   id1<span class="sy1">:</span>TOID <span class="sy3">=</span> <span class="sy1">....;</span>
   col1<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> <span class="sy1">...;</span>
   col2<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> <span class="sy1">...;</span>
   <span class="sy1">....</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
  Vue2 <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>MyClass<span class="br0">&#41;</span>
   sum1<span class="sy1">:</span>TMoney <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span><span class="sy1">...</span><span class="br0">&#41;</span><span class="sy1">;</span>
   sum2<span class="sy1">:</span>TMoney <span class="sy3">=</span> Vue1<span class="sy1">.</span><span class="me1">Select</span><span class="br0">&#40;</span><span class="st0">'sub1'</span><span class="sy1">,</span><span class="st0">'(id1=self.id2) and (col=%1) and (col2=%2)'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
   id2<span class="sy1">:</span>TOID <span class="sy3">=</span> <span class="sy1">...;</span>
   <span class="sy1">....</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">var</span> sel<span class="sy1">:</span>TSelector<span class="sy1">;</span>
<span class="kw1">begin</span>
  sel <span class="sy1">:</span><span class="sy3">=</span> Vue2<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span><span class="st0">''</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="st0">'valueCol1'</span><span class="sy1">,</span>1<span class="sy1">,....</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
  <span class="co1">//</span>
  <span class="sy1">...</span> 
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Vue_avec_interface_.28Union.29">Vue avec interface (Union)</span></h4>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p><p>Il est possible d'utiliser une interface pour générer une union de plusieurs vues locales supportant cette interface
</p><p>Exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">Type</span>
  ISoldeCompte <span class="sy3">=</span> <span class="kw1">interface</span>
    credit<span class="sy1">:</span><span class="kw4">Currency</span><span class="sy1">;</span>
    debit<span class="sy1">:</span><span class="kw4">Currency</span><span class="sy1">;</span> 
    typeLot<span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
    codeCompte<span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span>
    captionCompte<span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span>
    sensCompte<span class="sy1">:</span><span class="kw4">Integer</span><span class="sy1">;</span>
    norme<span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span> 
&#160;
  VueSoldeComptePeriode <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TCumulPeriodeCompte<span class="sy1">,</span>ISoldeCompte<span class="br0">&#41;</span>
    credit<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> creditTenue<span class="sy1">;</span>
    debit<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> debitTenue<span class="sy1">;</span>
    typeLot<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> typeLot<span class="sy1">;</span> 
    codeCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> compteGeneral<span class="sy1">.</span><span class="me1">codeCompte</span><span class="sy1">;</span>
    captionCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> compteGeneral<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span>
    sensCompte<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> compteGeneral<span class="sy1">.</span><span class="me1">sensPrivilegie</span><span class="sy1">;</span> 
    norme<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> normeComptable<span class="sy1">.</span><span class="me1">code</span><span class="sy1">;</span> 
    dateFin<span class="sy1">:</span><span class="kw4">Tdatetime</span> <span class="sy3">=</span> Periode<span class="sy1">.</span><span class="me1">dateFin</span> notInSelect<span class="sy1">;</span>
    <span class="br0">&#91;</span>dateFin &lt; GetDate<span class="br0">&#93;</span> 
  <span class="kw1">end</span><span class="sy1">;</span> 
&#160;
  VueSoldeEcriture <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TEcriture<span class="sy1">,</span>VueSoldeComptePeriode<span class="br0">&#41;</span>
    credit<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> credit<span class="sy1">:</span>TCValue<span class="sy1">;</span>
    debit<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> debit<span class="sy1">:</span>TCValue<span class="sy1">;</span>
    typeLot<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> piece<span class="sy1">.</span><span class="me1">lot</span><span class="sy1">.</span><span class="me1">typeLot</span><span class="sy1">;</span> 
    codeCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> compteGeneral<span class="sy1">.</span><span class="me1">codeCompte</span><span class="sy1">;</span>
    captionCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> compteGeneral<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span> 
    sensCompte<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> compteGeneral<span class="sy1">.</span><span class="me1">sensPrivilegie</span><span class="sy1">;</span> 
    norme<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> piece<span class="sy1">.</span><span class="me1">normeComptable</span><span class="sy1">.</span><span class="me1">code</span><span class="sy1">;</span> 
    eDate<span class="sy1">:</span><span class="kw4">Tdatetime</span> <span class="sy3">=</span> eDate notInSelect<span class="sy1">;</span> 
    <span class="br0">&#91;</span>eDate &gt;<span class="sy3">=</span> GetValue<span class="br0">&#40;</span><span class="st0">'begin Result&#160;:= TFacadeInitGeneral.GetPreviousPeriodEndDate(Date); end;'</span><span class="br0">&#41;</span><span class="br0">&#93;</span> 
  <span class="kw1">end</span><span class="sy1">;</span> 
&#160;
  VueSoldeCompte <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>ISoldeCompte<span class="sy1">,</span>VueSoldeComptePeriode<span class="sy1">,</span>VueSoldeEcriture<span class="br0">&#41;</span>
    solde<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> sumSens<span class="br0">&#40;</span>credit<span class="sy1">,</span>debit<span class="sy1">,</span>sensCompte<span class="br0">&#41;</span><span class="sy1">;</span>
    typeLot<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> typeLot<span class="sy1">;</span>
    codeCompte<span class="sy1">:</span><span class="kw4">string</span><span class="sy3">=</span> codeCompte<span class="sy1">;</span>
    captionCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> captionCompte<span class="sy1">;</span> 
    sensCompte<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> sensCompte<span class="sy1">;</span> 
    norme<span class="sy1">:</span><span class="kw4">string</span><span class="sy3">=</span> norme notInSelect<span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>   
&#160;
<span class="kw1">var</span> ls<span class="sy1">:</span>TSelector<span class="sy1">;</span> inst<span class="sy1">:</span>VueSoldeCompte<span class="sy1">;</span> doc<span class="sy1">:</span>TxmlhtmlMailDocument<span class="sy1">;</span> Table<span class="sy1">:</span>ThtmlTable<span class="sy1">;</span> ANorme1<span class="sy1">,</span>ANorme2<span class="sy1">:</span><span class="kw4">string</span><span class="sy1">;</span>
<span class="kw1">begin</span>
  ls <span class="sy1">:</span><span class="sy3">=</span> VueSoldeCompte<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span><span class="st0">'(codeCompte like&#160;%1) and (typeLot=%2) and ((norme=%3)or(norme=%4))'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span>
    _StrLike<span class="br0">&#40;</span>prefixeCompte<span class="br0">&#41;</span><span class="sy1">,</span>
    typeLot<span class="sy1">.</span><span class="me1">Value</span><span class="sy1">,</span>
    ANorme1<span class="sy1">,</span>
    ANorme2 
    <span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
&#160;
  <span class="sy1">...</span>
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<p><br />
</p>
<h4> <span class="mw-headline" id="Vue_utilisant_une_CTE_.28Commun_table_expression.29">Vue utilisant une CTE (Commun table expression)</span></h4>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p><p>Il est possible de générer une requête CTE&#160;: 
</p>
<ul><li> En utilisant une directive "over" dans la définition d'une colonne
</li><li> En positionant la propriété useCTE sur le sélecteur.
</li></ul>
<p>Le code SQL généré sera 
</p>
<pre>
With CTE AS (
)
SELECT * from CTE 
</pre>
<p>Lorsqu'une CTE est utilisée la clause Where du sélecteur s'applique sur résultat de la CTE.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">Type</span>
  Vue1 <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>MyClass<span class="br0">&#41;</span>
   sub1<span class="sy1">:</span>TMoney <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span><span class="sy1">...</span><span class="br0">&#41;</span><span class="sy1">;</span>
   id1<span class="sy1">:</span>TOID <span class="sy3">=</span> <span class="sy1">....;</span>
   <span class="sy1">....</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
  Vue2 <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>MyClass<span class="br0">&#41;</span>
   sum1<span class="sy1">:</span>TMoney <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span><span class="sy1">...</span><span class="br0">&#41;</span><span class="sy1">;</span>
   sum2<span class="sy1">:</span>TMoney <span class="sy3">=</span> Vue1<span class="sy1">.</span><span class="me1">Select</span><span class="br0">&#40;</span><span class="st0">'sub1'</span><span class="sy1">,</span><span class="st0">'(id1=self.id2)'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
   id2<span class="sy1">:</span>TOID <span class="sy3">=</span> <span class="sy1">...:</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">var</span> sel<span class="sy1">:</span>TSelector<span class="sy1">;</span>
<span class="kw1">begin</span>
  sel <span class="sy1">:</span><span class="sy3">=</span> Vue2<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span><span class="st0">'(sum1 &gt; sum2)'</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">true</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
  sel<span class="sy1">.</span><span class="me1">UseCTE</span> <span class="sy1">:</span><span class="sy3">=</span> <span class="kw2">True</span><span class="sy1">;</span>  
  <span class="co1">//</span>
  <span class="sy1">...</span> 
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h3> <span class="mw-headline" id="Directive_d.27attribut">Directive d'attribut</span></h3>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p>
<table class="wikitable">

<tr>
<th>Directive
</th>
<th>Action
</th></tr>
<tr>
<td>notInSelect
</td>
<td>L'attribut ne sera pas généré dans clause select
</td></tr>
<tr>
<td>over
</td>
<td>L'attribut est généré par rapport à la requête CTE
</td></tr>
<tr>
<td>primary (*)
</td>
<td>L'attribut fera partie de l'identifiant (oid) du résultat
</td></tr>
<tr>
<td>orderby (desc) (*)
</td>
<td>L'attribut fera partie de l'ordre de tri
</td></tr>
<tr>
<td>Caption
</td>
<td>Définit la propriété Caption de la vue
</td></tr></table>
<p>(*) Plusieurs attributs peuvent avoir cette directive, dans ce cas l'ordre de déclaration importe
</p>
<h3> <span class="mw-headline" id="Directive_primary">Directive primary</span></h3>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p><p>Une vue peut contenir plusieurs directives <b>primary</b> de type oid
</p><p>Dans ce cas l'identifiant d'un objet de la vue sera une liste identifiants.
</p>
<h3> <span class="mw-headline" id="Directive_orderby">Directive orderby</span></h3>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p><p>Une vue peut contenir plusieurs directives <b>orderby</b>
</p><p>Dans ce cas l'ordre de tri sera défini par la liste des attributs, dans l'ordre de leur déclaration dans la vue.
</p>
<h3> <span class="mw-headline" id="Op.C3.A9rateurs">Opérateurs</span></h3>
<h4> <span class="mw-headline" id="Op.C3.A9rateur_portant_sur_une_colonne">Opérateur portant sur une colonne</span></h4>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p>
<table class="wikitable">

<tr>
<th>Opérateur
</th>
<th>Arguments
</th>
<th>Action
</th>
<th>Opération
</th></tr>
<tr>
<td>isNull
</td>
<td>2
</td>
<td>Retourne la valeur de la colonne 2 si la valeur de la colonne 1 est nulle
</td>
<td>case A is NULL then B else A
</td></tr></table>
<p><b>Exemple d'utilisation de isNull</b>
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"> <span class="kw1">Type</span>
  VueValideur <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TPieceTaxable<span class="br0">&#41;</span>
   vp1<span class="sy1">:</span> TValideurPossible <span class="sy3">=</span> join<span class="br0">&#40;</span>ValidationEtat<span class="sy1">.</span><span class="me1">EtatPossible</span><span class="sy1">.</span><span class="me1">EtatMetier</span><span class="sy1">,</span>EtatMetier<span class="br0">&#41;</span><span class="sy1">;</span>
   vp2<span class="sy1">:</span> TValideurPossible <span class="sy3">=</span> join<span class="br0">&#40;</span>ValidationEtat<span class="sy1">.</span><span class="me1">RegleValidation</span><span class="sy1">,</span>RegleValidation<span class="br0">&#41;</span><span class="sy1">;</span>
   gcv<span class="sy1">:</span> TGroupeContactValidation <span class="sy3">=</span> leftjoin<span class="br0">&#40;</span>TGroupeValidation<span class="sy1">,</span>vp2<span class="sy1">.</span><span class="me1">ContactEtablissement</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   aId1<span class="sy1">:</span>TOID <span class="sy3">=</span> vp1<span class="sy1">.</span><span class="me1">oid</span><span class="sy1">;</span>
   aId2<span class="sy1">:</span>TOID <span class="sy3">=</span> vp2<span class="sy1">.</span><span class="me1">oid</span><span class="sy1">;</span> 
   aIdVP<span class="sy1">:</span>TOID <span class="sy3">=</span> vp2<span class="sy1">.</span><span class="me1">oidValideurPrecedent</span><span class="sy1">;</span>
   aIdDV<span class="sy1">:</span>TOID <span class="sy3">=</span> oiddernierValideur<span class="sy1">;</span> 
   aIdCV<span class="sy1">:</span>TOID <span class="sy3">=</span> vp2<span class="sy1">.</span><span class="me1">oidContactEtablissement</span><span class="sy1">;</span> 
   <span class="co1">// contact établissement valideur, peut être membre du groupe de validation ou le valideur défini par la règle</span>
   aIdCE<span class="sy1">:</span>TOID <span class="sy3">=</span> ISNULL<span class="br0">&#40;</span>gcv<span class="sy1">.</span><span class="me1">oidTContactEtablissement</span><span class="sy1">,</span>vp2<span class="sy1">.</span><span class="me1">oidContactEtablissement</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   <span class="co1">// personne </span>
   Mail<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> ISNULL<span class="br0">&#40;</span>gcv<span class="sy1">.</span><span class="me1">TContactEtablissement</span><span class="sy3">+</span>eMail<span class="sy1">,</span>vp2<span class="sy1">.</span><span class="me1">ContactEtablissement</span><span class="sy1">.</span><span class="me1">eMail</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   <span class="co1">// </span>
   <span class="br0">&#91;</span> <span class="br0">&#40;</span>aId1<span class="sy3">=</span>aId2<span class="br0">&#41;</span> <span class="sy1">...</span> <span class="br0">&#93;</span> 
  <span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Op.C3.A9rateur_portant_sur_un_type_num.C3.A9rique">Opérateur portant sur un type numérique</span></h4>
<table class="wikitable">

<tr>
<th>Opérateur
</th>
<th>Arguments
</th>
<th>Action
</th>
<th>Opération
</th></tr>
<tr>
<td>sum
</td>
<td>1
</td>
<td>Effectue la somme de l'attribut
</td>
<td>sum(A)
</td></tr>
<tr>
<td>min
</td>
<td>1
</td>
<td>Retourne le minimum de l'attribut
</td>
<td>min(A)
</td></tr>
<tr>
<td>max
</td>
<td>1
</td>
<td>Retourne le max de l'attribut
</td>
<td>max(A)
</td></tr>
<tr>
<td>add
</td>
<td>2
</td>
<td>Retourne la somme de deux attributs
</td>
<td>A+B
</td></tr>
<tr>
<td>sub
</td>
<td>2
</td>
<td>Retourne la différence entre deux attributs
</td>
<td>A-B
</td></tr>
<tr>
<td>mul
</td>
<td>2
</td>
<td>Retourne la multiplication de deux attributs
</td>
<td>A*B
</td></tr>
<tr>
<td>div
</td>
<td>2
</td>
<td>Retourne la divition de deux attributs
</td>
<td>A/B
</td></tr>
<tr>
<td>percent
</td>
<td>2
</td>
<td>Retourne le poucentage entre deux attributs
</td>
<td>case when B=0 then 0 else (100*A / B) end
</td></tr>
<tr>
<td>sumdiff
</td>
<td>2
</td>
<td>Retourne la somme de la différence entre deux attributs
</td>
<td>sum(A-B)
</td></tr>
<tr>
<td>sumdiff2
</td>
<td>3
</td>
<td>Retourne la somme de la différence entre trois attributs
</td>
<td>sum(A+B-C)
</td></tr>
<tr>
<td>mindiff
</td>
<td>2
</td>
<td>Retourne le min de la différence entre deux attributs
</td>
<td>min(A-B)
</td></tr>
<tr>
<td>maxdiff
</td>
<td>2
</td>
<td>Retourne le max de la différence entre deux attributs
</td>
<td>max(A-B)
</td></tr>
<tr>
<td>sumconcat
</td>
<td>2
</td>
<td>Retourne la somme de la somme entre deux attributs
</td>
<td>sum(A+B)
</td></tr>
<tr>
<td>minconcat
</td>
<td>2
</td>
<td>Retourne la min de la somme entre deux attributs
</td>
<td>min(A+B)
</td></tr>
<tr>
<td>maxconcat
</td>
<td>2
</td>
<td>Retourne le max de la somme entre deux attributs
</td>
<td>max(A+B)
</td></tr>
<tr>
<td>count
</td>
<td>1
</td>
<td>Compte le nombre de lignes
</td>
<td>count(*)
</td></tr></table>
<p><img src="../medias/images/stock/version900-32x32.png" alt="version900-32x32.png" />
</p>
<table class="wikitable">

<tr>
<th>Opérateur
</th>
<th>Arguments
</th>
<th>Action
</th>
<th>Opération
</th></tr>
<tr>
<td>sumDiffP
</td>
<td>2
</td>
<td>Retourne la somme de la différence si elle positive et 0 sinon.
</td>
<td>case sum(A-B)&gt;0 then sum(A-B) else 0
</td></tr>
<tr>
<td>sumDiffA
</td>
<td>2
</td>
<td>Retourne la valeur absolue de la différence.
</td>
<td>ABS(sum(A-B))
</td></tr>
<tr>
<td>sumDiffS
</td>
<td>2
</td>
<td>Retourne le signe de la différence
</td>
<td>case sum(A-B)&gt;0 then 1 else 0
</td></tr></table>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p>
<table class="wikitable">

<tr>
<th>Opérateur
</th>
<th>Arguments
</th>
<th>Action
</th>
<th>Operation
</th></tr>
<tr>
<td>sum
</td>
<td>1,2,3
</td>
<td>Effectue la somme des attributs
</td>
<td>sum(A), sum(A+B),sum(A+B+C)
</td></tr>
<tr>
<td>sumCase
</td>
<td>3
</td>
<td>Somme de l'attribut suivant une condition
</td>
<td>sum(case B=C then A else 0)
</td></tr>
<tr>
<td>sumSign
</td>
<td>3
</td>
<td>Somme signée de l'attribut suivant une condition
</td>
<td>sum(case B=C then A else -A)
</td></tr>
<tr>
<td>sumSens
</td>
<td>3
</td>
<td>Somme suivant le sens comptable (A=Credit, B=Débit, C=Sens, Sens=1=Débit)
</td>
<td>sum(case C=1 then B-A else A-B)
</td></tr></table>
<h4> <span class="mw-headline" id="Op.C3.A9rateur_portant_sur_une_chaine">Opérateur portant sur une chaine</span></h4>
<table class="wikitable">

<tr>
<th>Opérateur
</th>
<th>Arguments
</th>
<th>Action
</th>
<th>Opération
</th></tr>
<tr>
<td>concat
</td>
<td>2
</td>
<td>Concaténation de deux attributs chaîne
</td>
<td>concat (A,B)
</td></tr></table>
<h4> <span class="mw-headline" id="Op.C3.A9rateur_portant_sur_OID">Opérateur portant sur OID</span></h4>
<table class="wikitable">

<tr>
<th>Opérateur
</th>
<th>Arguments
</th>
<th>Action
</th></tr>
<tr>
<td>count
</td>
<td>1
</td>
<td>Compte les éléments de la vue
</td></tr></table>
<h4> <span class="mw-headline" id="Op.C3.A9rateur_portant_sur_une_date">Opérateur portant sur une date</span></h4>
<p>Ces opérateur prennent une date comme argument.
</p>
<table class="wikitable">

<tr>
<th>Opérateur
</th>
<th>Arguments
</th>
<th>Action
</th></tr>
<tr>
<td>year
</td>
<td>1
</td>
<td>Retourne l'année de la date
</td></tr>
<tr>
<td>quarter
</td>
<td>1
</td>
<td>Retourne le trimestre de la date
</td></tr>
<tr>
<td>month
</td>
<td>1
</td>
<td>Retourne le mois de la date
</td></tr>
<tr>
<td>dayofyear
</td>
<td>1
</td>
<td>Retourne le jour de l'année de la date
</td></tr>
<tr>
<td>dayofweek
</td>
<td>1
</td>
<td>Retourne le jour de la semaine de la date
</td></tr>
<tr>
<td>hour
</td>
<td>1
</td>
<td>Retourne le nombre d'heures de la date
</td></tr>
<tr>
<td>minute
</td>
<td>1
</td>
<td>Retourne le nombre de minutes de la date
</td></tr>
<tr>
<td>second
</td>
<td>1
</td>
<td>Retourne le nombre de secondes de la date
</td></tr>
<tr>
<td>millisecond
</td>
<td>1
</td>
<td>Retourne le nombre de millisecondes de la date
</td></tr>
<tr>
<td>daydiff
</td>
<td>2
</td>
<td>Retourne le nombre de jour entre deux dates
</td></tr></table>
<h4> <span class="mw-headline" id="Op.C3.A9rateur_portant_sur_une_r.C3.A9f.C3.A9rence">Opérateur portant sur une référence</span></h4>
<table class="wikitable">

<tr>
<th>Opérateur
</th>
<th>Arguments
</th>
<th>Action
</th></tr>
<tr>
<td><a href="Join_(view_ope).html" title="Join (view ope)">join</a>
</td>
<td>2
</td>
<td>Réalise une jointure sur une référence
</td></tr></table>
<h4> <span class="mw-headline" id="Op.C3.A9rateur_DateAdd">Opérateur DateAdd</span></h4>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p><p>DateAdd est un opérateur SQL pouvant être utilisé dans la partie littérale d'une expression.
</p>
<pre>
 dateAdd(dppart, colomn, number)
</pre>
<p><b>Exemple:</b>
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">Type</span>
  vueSelection <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TSelectionCompte<span class="br0">&#41;</span> 
   vc<span class="sy1">:</span>TCompteGeneral <span class="sy3">=</span> join<span class="br0">&#40;</span><span class="st0">'(codeCompte&gt;=self.compteInferieur) and (codeCompte&lt;=self.compteSuperieur)'</span><span class="br0">&#41;</span><span class="sy1">;</span>
   vp<span class="sy1">:</span>TPeriode <span class="sy3">=</span> join<span class="br0">&#40;</span><span class="st0">'(1=1)'</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   ve<span class="sy1">:</span>TExercice <span class="sy3">=</span> join<span class="br0">&#40;</span>oid<span class="sy1">,</span>vp<span class="sy1">.</span><span class="me1">oidexercice</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   ve1<span class="sy1">:</span>TExercice <span class="sy3">=</span> join<span class="br0">&#40;</span><span class="st0">'(?.dateDebut = DateAdd(dpyear,ve.dateDebut,-1))'</span><span class="br0">&#41;</span><span class="sy1">;</span>
   <span class="sy1">....</span>
  <span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h4> <span class="mw-headline" id="Op.C3.A9rateur_GetValue">Opérateur GetValue</span></h4>
<p><a href="Fichier%253AVersion11-32x32.png.html" class="image"><img alt="Version11-32x32.png" src="../images/8/82/Version11-32x32.png" width="32" height="32" /></a>
</p><p>GetValue est un opérateur script pouvant être utilisé dans la partir littérale d'une expression.
</p>
<pre>
  GetValue('expression')
</pre>
<p><b>Exemple&#160;:</b>
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1">  VueSoldeEcriture <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TEcriture<span class="sy1">,</span>VueSoldeComptePeriode<span class="br0">&#41;</span>
    credit<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> credit<span class="sy1">:</span>TCValue<span class="sy1">;</span>
    debit<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> debit<span class="sy1">:</span>TCValue<span class="sy1">;</span>
    typeLot<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> piece<span class="sy1">.</span><span class="me1">lot</span><span class="sy1">.</span><span class="me1">typeLot</span><span class="sy1">;</span> 
    codeCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> compteGeneral<span class="sy1">.</span><span class="me1">codeCompte</span><span class="sy1">;</span>
    captionCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> compteGeneral<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span> 
    sensCompte<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> compteGeneral<span class="sy1">.</span><span class="me1">sensPrivilegie</span><span class="sy1">;</span> 
    norme<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> piece<span class="sy1">.</span><span class="me1">normeComptable</span><span class="sy1">.</span><span class="me1">code</span><span class="sy1">;</span> 
    eDate<span class="sy1">:</span><span class="kw4">Tdatetime</span> <span class="sy3">=</span> eDate notInSelect<span class="sy1">;</span> 
    <span class="br0">&#91;</span>eDate &gt;<span class="sy3">=</span> GetValue<span class="br0">&#40;</span><span class="st0">'begin Result&#160;:= TFacadeInitGeneral.GetPreviousPeriodEndDate(Date); end;'</span><span class="br0">&#41;</span><span class="br0">&#93;</span> 
  <span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h3> <span class="mw-headline" id="Agr.C3.A9gat_portant_sur_un_montant">Agrégat portant sur un montant</span></h3>
<p>C'est le type de l'attribut défini dans la vue qui détermine le résultat de l'agrégation.
</p><p>Les opération d'agrégation effectuent un groupement par devise et agrègent les valeurs de montant (en devise, tenue de compte et reporting). Les chaînes de conversion sont à vides et la date de cours est la date du jour.  
</p>
<table class="wikitable">

<tr>
<th>Type Source
</th>
<th>Type Vue
</th>
<th>Opération
</th></tr>
<tr>
<td>source:Money
</td>
<td>vue:Money = sum(source)
</td>
<td>sum(Value) group by CodeDevise
</td></tr>
<tr>
<td>source:MoneyDT
</td>
<td>vue:Money = sum(source)
</td>
<td>sum(Value) group by CodeDevise
</td></tr>
<tr>
<td>source:Money
</td>
<td>vue:MoneyDT = sum(source)
</td>
<td>** ERREUR **
</td></tr>
<tr>
<td>source:MoneyDT
</td>
<td>vue:MoneyDT = sum(source)
</td>
<td>sum(Value) group by CodeDevise
</td></tr>
<tr>
<td>source:Money
</td>
<td>vue:Currency = sum(source)
</td>
<td>sum (Value)
</td></tr>
<tr>
<td>source:MoneyDT
</td>
<td>vue:Currency = sum(source)
</td>
<td>sum (Value)
</td></tr>
<tr>
<td>source:MoneyDT
</td>
<td>vue:Currency = sum(source:TCValue)
</td>
<td>sum (TCValue)
</td></tr>
<tr>
<td>source:MoneyDT
</td>
<td>vue:Currency = sum(source:RPValue)
</td>
<td>sum (RPValue)
</td></tr>
<tr>
<td>source:Currency
</td>
<td>vue:Currency = sum(source)
</td>
<td>sum (Value)
</td></tr></table>
<h3> <span class="mw-headline" id="Expression_SQL">Expression SQL</span></h3>
<p>Un attribut peut être défini par une expression SQL
</p>
<pre>
 name:type = expression('...');
</pre>
<ul><li> L'expression doit être une expression SQL valide compatible avec le ou les moteurs de base de données utilisés.
</li><li> Les alias de table et les paramètres sont substitués.
</li><li> Certaine fonctions sont utilisables à la fois sous SQL Server et Oracle dans une expression&#160;:
</li></ul>
<table class="wikitable">

<tr>
<th>Fonction
</th>
<th>Usage
</th>
<th>Oracle
</th></tr>
<tr>
<td>IsNull(a,b)
</td>
<td>Test si une valeur est nulle
</td>
<td>NVL(a,b)
</td></tr>
<tr>
<td>DateAdd(part,value,date)
</td>
<td>Ajoute une valeur à une date
</td>
<td>Utilise une fonction utilisateur DateAdd
</td></tr>
<tr>
<td>DateNotNull
</td>
<td>Constante retournant la date nulle, utilisez cette valeur avec la fonction IsNull(myDate,DateNotNull)
</td>
<td>to_date('18991230','YYYYMMDD')
</td></tr>
<tr>
<td>NumberNotNull
</td>
<td>Constante retournant une valeur numérique nulle, utilisez cette valeur avec la fonction IsNull(myValue,NumberNotNull)
</td>
<td>'0'
</td></tr></table>
<p>Exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">Type</span>
  VueRoleTiers <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TCumulPeriodeAuxiliaire<span class="br0">&#41;</span> 
   vnc<span class="sy1">:</span>TNormeComptable <span class="sy3">=</span> join<span class="br0">&#40;</span>oid<span class="sy1">,</span>oidnormeComptable<span class="br0">&#41;</span><span class="sy1">;</span> 
   van<span class="sy1">:</span>TApprocheNorme <span class="sy3">=</span> join<span class="br0">&#40;</span>oidTNormeComptable<span class="sy1">,</span>vnc<span class="sy1">.</span><span class="me1">oid</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   vac<span class="sy1">:</span>TApprocheComptable <span class="sy3">=</span> join<span class="br0">&#40;</span>oid<span class="sy1">,</span>van<span class="sy1">.</span><span class="me1">oidTApprocheComptable</span><span class="br0">&#41;</span><span class="sy1">;</span>
   oidApprocheComptable<span class="sy1">:</span>TOID <span class="sy3">=</span> vac<span class="sy1">.</span><span class="me1">oid</span><span class="sy1">;</span> 
&#160;
   dateDebutPeriode<span class="sy1">:</span><span class="kw4">TDatetime</span> <span class="sy3">=</span> Periode<span class="sy1">.</span><span class="me1">dateDebut</span> notInSelect<span class="sy1">;</span>
   dateFinPeriode<span class="sy1">:</span><span class="kw4">TDatetime</span> <span class="sy3">=</span> Periode<span class="sy1">.</span><span class="me1">dateFin</span> notInSelect<span class="sy1">;</span>  
&#160;
   idEtablissement<span class="sy1">:</span>TOID <span class="sy3">=</span> oidEtablissement<span class="sy1">;</span> 
   codeEtablissement<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> Etablissement<span class="sy1">.</span><span class="me1">code</span><span class="sy1">;</span> 
   libelleEtablissement<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> Etablissement<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span>  
&#160;
   idTiers<span class="sy1">:</span>TOID <span class="sy3">=</span> RoleTiers<span class="sy1">.</span><span class="me1">oidTiers</span><span class="sy1">;</span> 
   codeTiers<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> RoleTiers<span class="sy1">.</span><span class="me1">Tiers</span><span class="sy1">.</span><span class="me1">code</span><span class="sy1">;</span> 
   libelleTiers<span class="sy1">:</span><span class="kw4">String</span> <span class="sy3">=</span> RoleTiers<span class="sy1">.</span><span class="me1">Tiers</span><span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span>
&#160;
   <span class="co1">// Avant période </span>
   soldeAP_TC<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> expression<span class="br0">&#40;</span><span class="st0">'SUM(CASE WHEN Periode.dateFin &lt;&#160;%ArgDateDebutPeriode THEN debitTenue-creditTenue ELSE 0 END)'</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   soldeDebitAP_TC<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> expression<span class="br0">&#40;</span><span class="st0">'CASE WHEN SUM(CASE WHEN Periode.dateFin &lt;&#160;%ArgDateDebutPeriode THEN debitTenue-creditTenue ELSE 0 END)&gt;0 THEN  SUM(CASE WHEN Periode.dateFin &lt;&#160;%ArgDateDebutPeriode THEN debitTenue-creditTenue ELSE 0 END) ELSE 0 END'</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   soldeCreditAP_TC<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> expression<span class="br0">&#40;</span><span class="st0">'CASE WHEN SUM(CASE WHEN Periode.dateFin &lt;&#160;%ArgDateDebutPeriode THEN creditTenue-debitTenue ELSE 0 END)&gt;0 THEN  SUM(CASE WHEN Periode.dateFin &lt;&#160;%ArgDateDebutPeriode THEN creditTenue-debitTenue ELSE 0 END) ELSE 0 END'</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   <span class="co1">// sur péridode </span>
   debit_TC<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> expression<span class="br0">&#40;</span><span class="st0">'SUM(CASE WHEN Periode.dateDebut &gt;=&#160;%ArgDateDebutPeriode THEN debitTenue ELSE 0 END)'</span><span class="br0">&#41;</span><span class="sy1">;</span>
   credit_TC<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> expression<span class="br0">&#40;</span><span class="st0">'SUM(CASE WHEN Periode.dateDebut &gt;=&#160;%ArgDateDebutPeriode THEN creditTenue ELSE 0 END)'</span><span class="br0">&#41;</span><span class="sy1">;</span>
   <span class="co1">// total  </span>
   soldeDebit_TC<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span>debitTenue<span class="br0">&#41;</span><span class="sy1">;</span> 
   soldeCredit_TC<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> <span class="kw3">sum</span><span class="br0">&#40;</span>creditTenue<span class="br0">&#41;</span><span class="sy1">;</span> 
   solde_TC<span class="sy1">:</span><span class="kw4">Currency</span> <span class="sy3">=</span> sumDiff<span class="br0">&#40;</span>debitTenue<span class="sy1">,</span>creditTenue<span class="br0">&#41;</span><span class="sy1">;</span> 
   <span class="co1">// </span>
   <span class="br0">&#91;</span><span class="br0">&#40;</span>RoleTiers<span class="sy1">.</span><span class="me1">idOTP</span><span class="sy3">=</span>%ArgOTPRoleTiers<span class="br0">&#41;</span> <span class="kw1">and</span> <span class="br0">&#40;</span>typeLot&gt;<span class="sy3">=</span>%ArgTypeDeLot<span class="br0">&#41;</span> <span class="kw1">and</span> <span class="br0">&#40;</span>Periode<span class="sy1">.</span><span class="me1">dateFin</span>&lt;<span class="sy3">=</span>%ArgDateFinPeriode<span class="br0">&#41;</span> <span class="kw1">and</span> <span class="br0">&#40;</span>oidApprocheComptable<span class="sy3">=</span>%ArgApprocheComptable<span class="br0">&#41;</span><span class="br0">&#93;</span> 
  <span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<h3> <span class="mw-headline" id="Vue_de_mod.C3.A8le_utilisant_une_vue_locale">Vue de modèle utilisant une vue locale</span></h3>
<p><a href="Fichier%253AVersion-2024-r1-32x32.png.html" class="image"><img alt="Version-2024-r1-32x32.png" src="../images/9/9c/Version-2024-r1-32x32.png" width="32" height="32" /></a>
</p><p>Les vues locales permettent d'exprimer des requêtes complexes qui ne peuvent pas être définies par une vue de modèle.
</p><p>D'un autre coté, les vues définies dans le modèle peuvent être utilisées dans les interfaces et réutilisées dans le code métier.
</p><p>Il est possible de définir une vue de modèle utilisant une vue locale pour exprimer la requêtes et bénéficier ainsi des avantages des deux types de vue.
</p><p>Pour cela:
</p>
<ul><li> Définissez une vue de modèle sur la classe désirée.
</li><li> Ajouter les attributs supportés par la vue sans définir d'alias.
</li><li> Ajouter une méthode de classe GetSelector retournant un sélecteur d'une vue locale.
</li></ul>
<pre>
function TmyView.GetSelector():TSelector;
</pre>
<p><b>Exemple&#160;:</b>
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">unit</span> CptRubriques<span class="sy1">;</span>
<span class="kw1">interface</span>
&#160;
<span class="kw1">Type</span>
  TVueRubriqueCompte <span class="sy3">=</span> <span class="kw1">Class</span><span class="br0">&#40;</span>TSelectionCompte<span class="br0">&#41;</span> <span class="kw1">as</span> strView
    <span class="co2">{$O  modified=&quot;2023-09-26T08:15:16&quot; label=&quot;Vue des comptes d'une rubrique&quot; options=cloView viewOf=TSelectionCompte viewOrderBy=&quot;codeRubrique,codeCompte&quot; viewPrimaryKey=&quot;oidCompteGeneral,oidRubrique&quot;}</span>
  <span class="kw1">public</span>
    <span class="kw1">Class</span> <span class="kw1">Function</span> GetSelector<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy1">:</span>TSelector<span class="sy1">;</span>
    <span class="kw1">property</span> codeCompte<span class="sy1">:</span> <span class="kw4">String</span><span class="sy1">;</span>
    <span class="kw1">property</span> codeRubrique<span class="sy1">:</span> <span class="kw4">String</span><span class="sy1">;</span>
    <span class="kw1">property</span> CompteGeneral<span class="sy1">:</span> Ref <span class="kw1">of</span> TCompteGeneral<span class="sy1">;</span>
    <span class="kw1">property</span> libelleCompte<span class="sy1">:</span> <span class="kw4">String</span><span class="sy1">;</span>
    <span class="kw1">property</span> libelleRubrique<span class="sy1">:</span> <span class="kw4">String</span><span class="sy1">;</span>
    <span class="kw1">property</span> oidCompteGeneral<span class="sy1">:</span> TOID<span class="sy1">;</span>
    <span class="kw1">property</span> oidRubrique<span class="sy1">:</span> TOID<span class="sy1">;</span>
    <span class="kw1">property</span> oidSelectionCompte<span class="sy1">:</span> TOID<span class="sy1">;</span>
    <span class="kw1">property</span> Rubrique<span class="sy1">:</span> Ref <span class="kw1">of</span> TRubrique<span class="sy1">;</span>
    <span class="kw1">property</span> SelectionCompte<span class="sy1">:</span> Ref <span class="kw1">of</span> TSelectionCompte<span class="sy1">;</span>
    <span class="kw1">property</span> sensCompte<span class="sy1">:</span> Enum<span class="br0">&#40;</span>SensPrivilegie<span class="br0">&#41;</span><span class="sy1">;</span>
    <span class="kw1">property</span> sensMontant<span class="sy1">:</span> Enum<span class="br0">&#40;</span>SensRubriqueCpt<span class="br0">&#41;</span><span class="sy1">;</span>
    <span class="kw1">property</span> typeCollectif<span class="sy1">:</span> Enum<span class="br0">&#40;</span>TypeCollectif<span class="br0">&#41;</span><span class="sy1">;</span>
    <span class="kw1">property</span> typeCompte<span class="sy1">:</span> Enum<span class="br0">&#40;</span>TypeCompte<span class="br0">&#41;</span><span class="sy1">;</span>
    <span class="kw1">property</span> typeSelection<span class="sy1">:</span> Enum<span class="br0">&#40;</span>TypeCompte<span class="br0">&#41;</span><span class="sy1">;</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="coMULTI">{! DIR TVueRubriqueCompte}</span>
<span class="co2">{$PO TVueRubriqueCompte.codeCompte label=&quot;Code compte&quot;}</span>
<span class="co2">{$PO TVueRubriqueCompte.codeRubrique label=&quot;Code rubrique&quot;}</span>
<span class="co2">{$PO TVueRubriqueCompte.CompteGeneral label=&quot;Compte général&quot;}</span>
<span class="co2">{$PO TVueRubriqueCompte.libelleCompte label=&quot;Libellé compte&quot;}</span>
<span class="co2">{$PO TVueRubriqueCompte.libelleRubrique label=&quot;Libellé rubrique&quot;}</span>
<span class="co2">{$PO TVueRubriqueCompte.SelectionCompte label=&quot;Selecteur de compte&quot;}</span>
<span class="co2">{$PO TVueRubriqueCompte.sensCompte label=&quot;Sens privilégié du compte&quot;}</span>
<span class="co2">{$PO TVueRubriqueCompte.sensMontant label=&quot;Sens du montant&quot;}</span>
<span class="co2">{$PO TVueRubriqueCompte.typeCollectif label=&quot;Type collectif du compte&quot;}</span>
<span class="co2">{$PO TVueRubriqueCompte.typeCompte label=&quot;Type du compte&quot;}</span>
<span class="co2">{$PO TVueRubriqueCompte.typeSelection label=&quot;Type dans la selection&quot;}</span>
<span class="coMULTI">{!END DIR}</span>
&#160;
&#160;
<span class="coMULTI">{! DOC TVueRubriqueCompte}</span>
<span class="coMULTI">{!END DOC}</span>
&#160;
&#160;
<span class="kw1">Implementation</span>
&#160;
<span class="coMULTI">{! METHODS TVueRubriqueCompte}</span>
<span class="kw1">Class</span> <span class="kw1">Function</span> TVueRubriqueCompte<span class="sy1">.</span><span class="me1">GetSelector</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy1">:</span>TSelector<span class="sy1">;</span>
<span class="kw1">Type</span>
  vueSelection <span class="sy3">=</span> viewOf<span class="br0">&#40;</span>TSelectionCompte distinct<span class="br0">&#41;</span> 
   vp<span class="sy1">:</span>TCompteGeneral <span class="sy3">=</span> join<span class="br0">&#40;</span><span class="st0">'(codeCompte&gt;=self.compteInferieur) and (codeCompte&lt;=self.compteSuperieur)'</span><span class="br0">&#41;</span><span class="sy1">;</span>
   oidSelectionCompte<span class="sy1">:</span>TOID <span class="sy3">=</span> oid<span class="sy1">;</span> 
   oidCompteGeneral<span class="sy1">:</span>TOID <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">oid</span> primary<span class="sy1">;</span>
   oidRubrique<span class="sy1">:</span>TOID <span class="sy3">=</span> oidRubriqueCompte primary<span class="sy1">;</span> 
   _Caption<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> _concat<span class="br0">&#40;</span>RubriqueCompte<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">,</span>vp<span class="sy1">.</span><span class="me1">Caption</span><span class="br0">&#41;</span> caption<span class="sy1">;</span> <span class="co1">//&#160;! _ in front concat is because of CloudFlare</span>
   codeRubrique<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> RubriqueCompte<span class="sy1">.</span><span class="me1">code</span> orderby<span class="sy1">;</span> 
   codeCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">codeCompte</span> orderby<span class="sy1">;</span>
   libelleCompte<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span> 
   libelleRubrique<span class="sy1">:</span><span class="kw4">string</span> <span class="sy3">=</span> RubriqueCompte<span class="sy1">.</span><span class="me1">Caption</span><span class="sy1">;</span> 
   sensMontant<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> sensMontant<span class="sy1">;</span> 
   typeSelection<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> typeCompte<span class="sy1">;</span> 
   sensCompte<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">sensPrivilegie</span><span class="sy1">;</span>
   typeCollectif<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">typeCollectif</span><span class="sy1">;</span>
   typeCompte<span class="sy1">:</span><span class="kw4">Integer</span> <span class="sy3">=</span> vp<span class="sy1">.</span><span class="me1">typeCompte</span><span class="sy1">;</span> 
  <span class="kw1">end</span><span class="sy1">;</span> 
&#160;
<span class="kw1">begin</span>
  Result <span class="sy1">:</span><span class="sy3">=</span> vueSelection<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span><span class="st0">''</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">True</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
<span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="coMULTI">{!END METHODS}</span>
<span class="kw1">end</span><span class="sy1">.</span></pre></div></div>
<h4> <span class="mw-headline" id="Param.C3.A8tre_de_GetSelector">Paramètre de GetSelector</span></h4>
<p>Il est possible de passer des paramètres à la fonction GetSelector
</p>
<pre>
function TmyView.GetSelector(p:TQueryBuilder):TSelector;
</pre>
<p>Exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="delphi source-delphi" style="font-family:monospace;"><pre class="de1"><span class="kw1">function</span> GetSelector<span class="br0">&#40;</span>p<span class="sy1">:</span>TQueryBuilder<span class="br0">&#41;</span><span class="sy1">:</span>TSelector<span class="sy1">;</span>
&#160;
<span class="kw1">Type</span>
  vueEcheanceTC <span class="sy3">=</span> <span class="sy1">...</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
  vueEcheanceTR <span class="sy3">=</span> <span class="sy1">...</span>
  <span class="kw1">end</span><span class="sy1">;</span>
&#160;
<span class="kw1">begin</span>
  <span class="kw1">if</span> <span class="kw3">Assigned</span><span class="br0">&#40;</span>p<span class="br0">&#41;</span> <span class="kw1">and</span> p<span class="sy1">.</span><span class="me1">hasParameter</span><span class="br0">&#40;</span><span class="st0">'ArgDeviseTC'</span><span class="br0">&#41;</span> <span class="kw1">and</span> <span class="br0">&#40;</span>p<span class="sy1">.</span><span class="me1">GetParameter</span><span class="br0">&#40;</span><span class="st0">'ArgDeviseTC'</span><span class="br0">&#41;</span>&lt;&gt;<span class="st0">''</span><span class="br0">&#41;</span>
   <span class="kw1">then</span> Result <span class="sy1">:</span><span class="sy3">=</span> vueEcheanceTC<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span><span class="st0">''</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">True</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
   <span class="kw1">else</span> Result <span class="sy1">:</span><span class="sy3">=</span> vueEcheanceTR<span class="sy1">.</span><span class="me1">CreateSelector</span><span class="br0">&#40;</span><span class="st0">''</span><span class="sy1">,</span><span class="st0">''</span><span class="sy1">,</span><span class="kw2">True</span><span class="sy1">,</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy1">;</span>
  Result<span class="sy1">.</span><span class="me1">useCTE</span> <span class="sy1">:</span><span class="sy3">=</span> <span class="kw2">True</span><span class="sy1">;</span> 
  <span class="co1">// </span>
  <span class="kw1">if</span> <span class="kw1">not</span> <span class="br0">&#40;</span><span class="kw3">Assigned</span><span class="br0">&#40;</span>p<span class="br0">&#41;</span> <span class="kw1">and</span> p<span class="sy1">.</span><span class="me1">hasParameter</span><span class="br0">&#40;</span><span class="st0">'ArgDateRef'</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">then</span>
   <span class="kw1">begin</span>
     Result<span class="sy1">.</span><span class="me1">AddParameter</span><span class="br0">&#40;</span><span class="st0">'ArgDateRef'</span><span class="sy1">,</span><span class="kw3">Date</span><span class="br0">&#41;</span><span class="sy1">;</span> 
   <span class="kw1">end</span><span class="sy1">;</span> 
<span class="kw1">end</span><span class="sy1">;</span></pre></div></div>
<p>Voir aussi&#160;:
</p>
<ul><li> <a href="Vue_anonyme_(langage).html" title="Vue anonyme (langage)">Vue anonyme</a>
</li></ul>

<!-- 
NewPP limit report
Preprocessor node count: 570/1000000
Post-expand include size: 1660/2097152 bytes
Template argument size: 310/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key wiki1000dbtahoe-l1000_:pcache:idhash:2920-0!*!0!!fr!2!* and timestamp 20240729130050 -->
<br /><br /><br /><br /><table class="whos_here" width="100%" cellpadding="0" cellspacing="0"><tr>
                        <td width="100%" class="whos_here_header">
                        <a href="Special%253AAWCforum/whoshere.html"><i>Whos here now:</i></a>  
                        &nbsp; <b>Members</b> 0
                        &nbsp; <b>Guests</b> 1
                        &nbsp; <b>Bots & Crawlers</b>  0
                        </td>
         </tr><tr><td class="whos_here_row"> &nbsp;   </td></tr></table></div><div class="printfooter">
Récupérée de « <a href="https://frp.sage.fr/wiki1000/index.php?title=Vue_locale_(langage)&amp;oldid=14642">https://frp.sage.fr/wiki1000/index.php?title=Vue_locale_(langage)&amp;oldid=14642</a> »</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="https://frp.sage.fr/wiki1000/index.php/Sp%C3%83%C2%A9cial:Cat%C3%83%C2%A9gories" title="Spécial:Catégories">Catégories</a> : <ul><li><a href="https://frp.sage.fr/wiki1000/index.php/Cat%C3%83%C2%A9gorie:Langage" title="Catégorie:Langage">Langage</a></li><li><a href="https://frp.sage.fr/wiki1000/index.php/Cat%C3%83%C2%A9gorie:Vue_de_classe" title="Catégorie:Vue de classe">Vue de classe</a></li><li><a href="https://frp.sage.fr/wiki1000/index.php/Cat%C3%83%C2%A9gorie:Version650" title="Catégorie:Version650">Version650</a></li><li><a href="https://frp.sage.fr/wiki1000/index.php/Cat%C3%83%C2%A9gorie:Version11" title="Catégorie:Version11">Version11</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Affichages</h5>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="Vue_locale_(langage).html" title="Voir la page de contenu [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="https://frp.sage.fr/wiki1000/index.php?title=Discussion:Vue_locale_(langage)&amp;action=edit&amp;redlink=1" title="Discussion au sujet de cette page de contenu [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="https://frp.sage.fr/wiki1000/index.php?title=Vue_locale_(langage)&amp;action=edit" title="Cette page est protégée.&#10;Vous pouvez toutefois en visualiser la source. [e]" accesskey="e">Voir le texte source</a></li>
				<li id="ca-history"><a href="https://frp.sage.fr/wiki1000/index.php?title=Vue_locale_(langage)&amp;action=history" title="Les versions passées de cette page (avec leurs contributeurs) [h]" accesskey="h">Historique</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Outils personnels</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="https://frp.sage.fr/wiki1000/index.php?title=Sp%C3%83%C2%A9cial:Connexion&amp;returnto=Vue+locale+(langage)" title="Vous êtes encouragé(e) à vous identifier ; ce n'est cependant pas obligatoire. [o]" accesskey="o">Connexion</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a title="Page principale" style="background-image: url(../medias/images/stock/wiki-1000.png);" href="Main_Page.html"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class="generated-sidebar portlet" id="p-navigation">
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage"><a href="Main_Page.html" title="Visiter la page d'accueil du site [z]" accesskey="z">Main Page</a></li>
				<li id="n-recentchanges"><a href="https://frp.sage.fr/wiki1000/index.php/Sp%C3%83%C2%A9cial:Modifications_r%C3%83%C2%A9centes" title="Liste des modifications récentes sur le wiki [r]" accesskey="r">Modifications récentes</a></li>
				<li id="n-help"><a href="https://frp.sage.fr/wiki1000/index.php/Aide:Accueil" title="Aide">Aide</a></li>
				<li id="n-Guide-de-r.C3.A9daction"><a href="https://frp.sage.fr/wiki1000/index.php/Guide_de_r%C3%83%C2%A9daction_(wiki)">Guide de rédaction</a></li>
			</ul>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-Th.C3.A8mes">
		<h5>Thèmes</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Administration"><a href="https://frp.sage.fr/wiki1000/index.php/Cat%C3%83%C2%A9gorie:Administration">Administration</a></li>
				<li id="n-D.C3.A9veloppement"><a href="https://frp.sage.fr/wiki1000/index.php/D%C3%83%C2%A9veloppement_DSM">Développement</a></li>
				<li id="n-Didactitiels"><a href="https://frp.sage.fr/wiki1000/index.php/Cat%C3%83%C2%A9gorie:Video">Didactitiels</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Rechercher</label></h5>
		<div id="searchBody" class="pBody">
			<form action="https://frp.sage.fr/wiki1000/index.php" id="searchform">
				<input type='hidden' name="title" value="Spécial:Recherche"/>
				<input type="search" name="search" title="Rechercher dans Wiki1000 [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="Lire" title="Aller vers une page portant exactement ce nom si elle existe." id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="Rechercher" title="Rechercher les pages comportant ce texte." id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Boîte à outils</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="https://frp.sage.fr/wiki1000/index.php/Sp%C3%83%C2%A9cial:Pages_li%C3%83%C2%A9es/Vue_locale_(langage)" title="Liste des pages liées à celle-ci [j]" accesskey="j">Pages liées</a></li>
				<li id="t-recentchangeslinked"><a href="https://frp.sage.fr/wiki1000/index.php/Sp%C3%83%C2%A9cial:Suivi_des_liens/Vue_locale_(langage)" title="Liste des modifications récentes des pages liées à celle-ci [k]" accesskey="k">Suivi des pages liées</a></li>
				<li id="t-specialpages"><a href="https://frp.sage.fr/wiki1000/index.php/Sp%C3%83%C2%A9cial:Pages_sp%C3%83%C2%A9ciales" title="Liste de toutes les pages spéciales [q]" accesskey="q">Pages spéciales</a></li>
				<li><a href="https://frp.sage.fr/wiki1000/index.php?title=Vue_locale_(langage)&amp;printable=yes" rel="alternate">Version imprimable</a></li>
				<li id="t-permalink"><a href="https://frp.sage.fr/wiki1000/index.php?title=Vue_locale_(langage)&amp;oldid=14642" title="Lien permanent vers cette version de la page">Adresse de cette version</a></li>
<li id="t-pdf"><a href="https://frp.sage.fr/wiki1000/index.php?title=Sp%C3%83%C2%A9cial:Pdfprint&amp;page=Vue_locale_(langage)">Imprimer en PDF</a></li>			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer">
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> Dernière modification de cette page le 15 juin 2024 à 09:58.<br /></li>
		<li id="viewcount">Cette page a été consultée 16 152 fois.</li>
		<li id="privacy"><a href="https://frp.sage.fr/wiki1000/index.php/Wiki1000:Confidentialit%C3%83%C2%A9" title="Wiki1000:Confidentialité">Politique de confidentialité</a></li>
		<li id="about"><a href="https://frp.sage.fr/wiki1000/index.php/Wiki1000:%C3%83%E2%82%AC_propos" title="Wiki1000:À propos">À propos de Wiki1000</a></li>
		<li id="disclaimer"><a href="https://frp.sage.fr/wiki1000/index.php/Wiki1000:Avertissements_g%C3%83%C2%A9n%C3%83%C2%A9raux" title="Wiki1000:Avertissements généraux">Avertissements</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
	mw.loader.load(["mediawiki.user", "mediawiki.util", "mediawiki.page.ready", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax"]);
}
</script>
<style type="text/css">.poll_display_table {
 
border: 1px solid #aaa;
    
    padding: 1px;
 
} 
.poll_displayheader {
 
border-bottom: 1px dashed #aaa;
    padding: 4px;
    background-color: #DDDDDD;
    font-family:"Courier New", Courier, mono;
 
} 
.poll_display_row {
 
border-bottom: 1px solid #aaa;
    background-color: #f9f9f9;
    padding: 2px;
 
} 
.poll_display_vote_total {
 
border-top: 1px solid #aaa;
    padding: 4px;
    background-color: #DDDDDD;
    font-family:"Courier New", Courier, mono;
 
} 
.poll_display_vote_numbers_header {
 
border: 1px solid #aaa;
border-bottom: 0;
 
} 
.poll_display_vote_percent_header {
 
border-top: 1px solid #aaa;
    padding: 1px;
 
} 
.poll_display_vote_option_header {
 
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
 
} 
.poll_display_vote_numbers {
 
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
 
} 
.poll_display_vote_percent {
 
border-top: 1px solid #aaa;
    padding: 1px;
 
} 
.poll_display_vote_option {
 
border: 1px solid #aaa;
    border-bottom: 0;
    padding: 1px;
 
} 
.poll_percent_color_op10 {
 background-color: #7FFF00; 
} 
.poll_percent_color_op1 {
 background-color: #CD5555; 
} 
.poll_percent_color_op2 {
 background-color: #5CACEE; 
} 
.poll_percent_color_op3 {
 background-color: #FFCC11; 
} 
.poll_percent_color_op4 {
 background-color: #668014; 
} 
.poll_percent_color_op5 {
 background-color: #A0522D; 
} 
.poll_percent_color_op6 {
 background-color: #9F79EE; 
} 
.poll_percent_color_op7 {
 background-color: #EE00EE; 
} 
.poll_percent_color_op8 {
 background-color: #DC143C; 
} 
.poll_percent_color_op9 {
 background-color: #551011; 
} 
.whos_here_header {
 
border-bottom: 1px dashed #aaa;
            padding: 4px;
            font-family:"Courier New", Courier, mono;
 
} 
.whos_here_row {
 
border-bottom: 1px solid #aaa;
            background-color: #f9f9f9;
            padding: 2px;
 
} 
.whos_here {
 
border: 1px solid #aaa;
            border-bottom: 0;
 
} 
.pagejumps_PostOnForumPage {
 
border: 1px solid #aaa;
    margin-left: 3px;
    font-size: 100%;
    padding-left: 3px;
    padding-right: 3px;
    padding-bottom: 0px;
 
} 

 .nothing {font-size: 0%;
                                margin: .0em;
                                border: 0;
                                margin: 0;
                                padding: 0;
                                width: 0;}
</style>

<script src="../load.php@debug=false&amp;lang=fr&amp;modules=site&amp;only=scripts&amp;skin=monobook&amp;%252A"></script>
<script>if(window.mw){
	mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,
	"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"searchNs121707":true,"variant":"fr","language":"fr","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs100":false,"searchNs101":false,"searchNs102":false,"searchNs103":false,"searchNs104":false,"searchNs105":false,"searchNs106":false,"searchNs107":false,"searchNs108":false,"searchNs109":false,"searchNs110":false,"searchNs111":false});;mw.user.tokens.set({"editToken":"+\\","watchToken":false});;mw.loader.state({"user.options":"ready","user.tokens":"ready"});
	
	/* cache key: wiki1000dbtahoe-l1000_:resourceloader:filter:minify-js:4:2d7b56d44af11e7e6a0c631677f449b0 */
}
</script><!-- Served in 0.465 secs. --><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'8aad47cfebed6554',t:'MTcyMjI1NzkwNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body></html>